

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lxml changelog &mdash; lxml 3.7.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/lxml_theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="lxml 3.7.2 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> lxml
          

          
          </a>

          
            
            
              <div class="version">
                3.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">lxml changelog</a><ul>
<li><a class="reference internal" href="#id1">3.7.2 (2017-01-08)</a><ul>
<li><a class="reference internal" href="#bugs-fixed">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">3.7.1 (2016-12-23)</a></li>
<li><a class="reference internal" href="#id3">3.7.0 (2016-12-10)</a><ul>
<li><a class="reference internal" href="#features-added">Features added</a></li>
<li><a class="reference internal" href="#id4">Bugs fixed</a></li>
<li><a class="reference internal" href="#other-changes">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">3.6.4 (2016-08-20)</a></li>
<li><a class="reference internal" href="#id6">3.6.3 (2016-08-18)</a></li>
<li><a class="reference internal" href="#id7">3.6.2 (2016-08-18)</a></li>
<li><a class="reference internal" href="#id8">3.6.1 (2016-07-24)</a><ul>
<li><a class="reference internal" href="#id9">Features added</a></li>
<li><a class="reference internal" href="#id10">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">3.6.0 (2016-03-17)</a><ul>
<li><a class="reference internal" href="#id12">Features added</a></li>
<li><a class="reference internal" href="#id13">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">3.5.0 (2015-11-13)</a><ul>
<li><a class="reference internal" href="#id15">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2015-09-18">3.5.0b1 (2015-09-18)</a><ul>
<li><a class="reference internal" href="#id16">Features added</a></li>
<li><a class="reference internal" href="#id17">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18">3.4.4 (2015-04-25)</a><ul>
<li><a class="reference internal" href="#id19">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">3.4.3 (2015-04-15)</a><ul>
<li><a class="reference internal" href="#id21">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">3.4.2 (2015-02-07)</a><ul>
<li><a class="reference internal" href="#id23">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id24">3.4.1 (2014-11-20)</a><ul>
<li><a class="reference internal" href="#id25">Features added</a></li>
<li><a class="reference internal" href="#id26">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id27">3.4.0 (2014-09-10)</a><ul>
<li><a class="reference internal" href="#id28">Features added</a></li>
<li><a class="reference internal" href="#id29">Bugs fixed</a></li>
<li><a class="reference internal" href="#id30">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id31">3.3.6 (2014-08-28)</a><ul>
<li><a class="reference internal" href="#id32">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id33">3.3.5 (2014-04-18)</a><ul>
<li><a class="reference internal" href="#id34">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id35">3.3.4 (2014-04-03)</a><ul>
<li><a class="reference internal" href="#id36">Features added</a></li>
<li><a class="reference internal" href="#id37">Bugs fixed</a></li>
<li><a class="reference internal" href="#id38">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id39">3.3.3 (2014-03-04)</a><ul>
<li><a class="reference internal" href="#id40">Bugs fixed</a></li>
<li><a class="reference internal" href="#id41">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">3.3.2 (2014-02-26)</a><ul>
<li><a class="reference internal" href="#id43">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id44">3.3.1 (2014-02-12)</a><ul>
<li><a class="reference internal" href="#id45">Features added</a></li>
<li><a class="reference internal" href="#id46">Bugs fixed</a></li>
<li><a class="reference internal" href="#id47">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id48">3.3.0 (2014-01-26)</a><ul>
<li><a class="reference internal" href="#id49">Features added</a></li>
<li><a class="reference internal" href="#id50">Bugs fixed</a></li>
<li><a class="reference internal" href="#id51">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta5-2014-01-18">3.3.0beta5 (2014-01-18)</a><ul>
<li><a class="reference internal" href="#id52">Features added</a></li>
<li><a class="reference internal" href="#id53">Bugs fixed</a></li>
<li><a class="reference internal" href="#id54">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta4-2014-01-12">3.3.0beta4 (2014-01-12)</a><ul>
<li><a class="reference internal" href="#id55">Features added</a></li>
<li><a class="reference internal" href="#id56">Bugs fixed</a></li>
<li><a class="reference internal" href="#id57">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta3-2014-01-02">3.3.0beta3 (2014-01-02)</a><ul>
<li><a class="reference internal" href="#id58">Features added</a></li>
<li><a class="reference internal" href="#id59">Bugs fixed</a></li>
<li><a class="reference internal" href="#id60">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta2-2013-12-20">3.3.0beta2 (2013-12-20)</a><ul>
<li><a class="reference internal" href="#id61">Features added</a></li>
<li><a class="reference internal" href="#id62">Bugs fixed</a></li>
<li><a class="reference internal" href="#id63">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2013-12-12">3.3.0beta1 (2013-12-12)</a><ul>
<li><a class="reference internal" href="#id64">Features added</a></li>
<li><a class="reference internal" href="#id65">Bugs fixed</a></li>
<li><a class="reference internal" href="#id66">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id67">3.2.5 (2014-01-02)</a><ul>
<li><a class="reference internal" href="#id68">Features added</a></li>
<li><a class="reference internal" href="#id69">Bugs fixed</a></li>
<li><a class="reference internal" href="#id70">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id71">3.2.4 (2013-11-07)</a><ul>
<li><a class="reference internal" href="#id72">Features added</a></li>
<li><a class="reference internal" href="#id73">Bugs fixed</a></li>
<li><a class="reference internal" href="#id74">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id75">3.2.3 (2013-07-28)</a><ul>
<li><a class="reference internal" href="#id76">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id77">3.2.2 (2013-07-28)</a><ul>
<li><a class="reference internal" href="#id78">Features added</a></li>
<li><a class="reference internal" href="#id79">Bugs fixed</a></li>
<li><a class="reference internal" href="#id80">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id81">3.2.1 (2013-05-11)</a><ul>
<li><a class="reference internal" href="#id82">Features added</a></li>
<li><a class="reference internal" href="#id83">Bugs fixed</a></li>
<li><a class="reference internal" href="#id84">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id85">3.2.0 (2013-04-28)</a><ul>
<li><a class="reference internal" href="#id86">Features added</a></li>
<li><a class="reference internal" href="#id87">Bugs fixed</a></li>
<li><a class="reference internal" href="#id88">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id89">3.1.2 (2013-04-12)</a><ul>
<li><a class="reference internal" href="#id90">Features added</a></li>
<li><a class="reference internal" href="#id91">Bugs fixed</a></li>
<li><a class="reference internal" href="#id92">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id93">3.1.1 (2013-03-29)</a><ul>
<li><a class="reference internal" href="#id94">Features added</a></li>
<li><a class="reference internal" href="#id95">Bugs fixed</a></li>
<li><a class="reference internal" href="#id96">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id97">3.1.0 (2013-02-10)</a><ul>
<li><a class="reference internal" href="#id98">Features added</a></li>
<li><a class="reference internal" href="#id99">Bugs fixed</a></li>
<li><a class="reference internal" href="#id100">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2012-12-21">3.1beta1 (2012-12-21)</a><ul>
<li><a class="reference internal" href="#id101">Features added</a></li>
<li><a class="reference internal" href="#id102">Bugs fixed</a></li>
<li><a class="reference internal" href="#id103">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id104">3.0.2 (2012-12-14)</a><ul>
<li><a class="reference internal" href="#id105">Features added</a></li>
<li><a class="reference internal" href="#id106">Bugs fixed</a></li>
<li><a class="reference internal" href="#id107">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id108">3.0.1 (2012-10-14)</a><ul>
<li><a class="reference internal" href="#id109">Features added</a></li>
<li><a class="reference internal" href="#id110">Bugs fixed</a></li>
<li><a class="reference internal" href="#id111">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id112">3.0 (2012-10-08)</a><ul>
<li><a class="reference internal" href="#id113">Features added</a></li>
<li><a class="reference internal" href="#id114">Bugs fixed</a></li>
<li><a class="reference internal" href="#id115">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2012-09-26">3.0beta1 (2012-09-26)</a><ul>
<li><a class="reference internal" href="#id116">Features added</a></li>
<li><a class="reference internal" href="#id117">Bugs fixed</a></li>
<li><a class="reference internal" href="#id118">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha2-2012-08-23">3.0alpha2 (2012-08-23)</a><ul>
<li><a class="reference internal" href="#id119">Features added</a></li>
<li><a class="reference internal" href="#id120">Bugs fixed</a></li>
<li><a class="reference internal" href="#id121">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha1-2012-07-31">3.0alpha1 (2012-07-31)</a><ul>
<li><a class="reference internal" href="#id122">Features added</a></li>
<li><a class="reference internal" href="#id123">Bugs fixed</a></li>
<li><a class="reference internal" href="#id124">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id125">2.3.6 (2012-09-28)</a><ul>
<li><a class="reference internal" href="#id126">Features added</a></li>
<li><a class="reference internal" href="#id127">Bugs fixed</a></li>
<li><a class="reference internal" href="#id128">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id129">2.3.5 (2012-07-31)</a><ul>
<li><a class="reference internal" href="#id130">Features added</a></li>
<li><a class="reference internal" href="#id131">Bugs fixed</a></li>
<li><a class="reference internal" href="#id132">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id133">2.3.4 (2012-03-26)</a><ul>
<li><a class="reference internal" href="#id134">Features added</a></li>
<li><a class="reference internal" href="#id135">Bugs fixed</a></li>
<li><a class="reference internal" href="#id136">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id137">2.3.3 (2012-01-04)</a><ul>
<li><a class="reference internal" href="#id138">Features added</a></li>
<li><a class="reference internal" href="#id139">Bugs fixed</a></li>
<li><a class="reference internal" href="#id140">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id141">2.3.2 (2011-11-11)</a><ul>
<li><a class="reference internal" href="#id142">Features added</a></li>
<li><a class="reference internal" href="#id143">Bugs fixed</a></li>
<li><a class="reference internal" href="#id144">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id145">2.3.1 (2011-09-25)</a><ul>
<li><a class="reference internal" href="#id146">Features added</a></li>
<li><a class="reference internal" href="#id147">Bugs fixed</a></li>
<li><a class="reference internal" href="#id148">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id149">2.3 (2011-02-06)</a><ul>
<li><a class="reference internal" href="#id150">Features added</a></li>
<li><a class="reference internal" href="#id151">Bugs fixed</a></li>
<li><a class="reference internal" href="#id152">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2010-09-06">2.3beta1 (2010-09-06)</a><ul>
<li><a class="reference internal" href="#id153">Features added</a></li>
<li><a class="reference internal" href="#id154">Bugs fixed</a></li>
<li><a class="reference internal" href="#id155">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha2-2010-07-24">2.3alpha2 (2010-07-24)</a><ul>
<li><a class="reference internal" href="#id156">Features added</a></li>
<li><a class="reference internal" href="#id157">Bugs fixed</a></li>
<li><a class="reference internal" href="#id158">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha1-2010-06-19">2.3alpha1 (2010-06-19)</a><ul>
<li><a class="reference internal" href="#id159">Features added</a></li>
<li><a class="reference internal" href="#id160">Bugs fixed</a></li>
<li><a class="reference internal" href="#id161">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id162">2.2.8 (2010-09-02)</a><ul>
<li><a class="reference internal" href="#id163">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id164">2.2.7 (2010-07-24)</a><ul>
<li><a class="reference internal" href="#id165">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id166">2.2.6 (2010-03-02)</a><ul>
<li><a class="reference internal" href="#id167">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id168">2.2.5 (2010-02-28)</a><ul>
<li><a class="reference internal" href="#id169">Features added</a></li>
<li><a class="reference internal" href="#id170">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id171">2.2.4 (2009-11-11)</a><ul>
<li><a class="reference internal" href="#id172">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id173">2.2.3 (2009-10-30)</a><ul>
<li><a class="reference internal" href="#id174">Features added</a></li>
<li><a class="reference internal" href="#id175">Bugs fixed</a></li>
<li><a class="reference internal" href="#id176">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id177">2.2.2 (2009-06-21)</a><ul>
<li><a class="reference internal" href="#id178">Features added</a></li>
<li><a class="reference internal" href="#id179">Bugs fixed</a></li>
<li><a class="reference internal" href="#id180">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id181">2.2.1 (2009-06-02)</a><ul>
<li><a class="reference internal" href="#id182">Features added</a></li>
<li><a class="reference internal" href="#id183">Bugs fixed</a></li>
<li><a class="reference internal" href="#id184">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id185">2.2 (2009-03-21)</a><ul>
<li><a class="reference internal" href="#id186">Features added</a></li>
<li><a class="reference internal" href="#id187">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta4-2009-02-27">2.2beta4 (2009-02-27)</a><ul>
<li><a class="reference internal" href="#id188">Features added</a></li>
<li><a class="reference internal" href="#id189">Bugs fixed</a></li>
<li><a class="reference internal" href="#id190">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta3-2009-02-17">2.2beta3 (2009-02-17)</a><ul>
<li><a class="reference internal" href="#id191">Features added</a></li>
<li><a class="reference internal" href="#id192">Bugs fixed</a></li>
<li><a class="reference internal" href="#id193">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta2-2009-01-25">2.2beta2 (2009-01-25)</a><ul>
<li><a class="reference internal" href="#id194">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id195">2.1.5 (2009-01-06)</a><ul>
<li><a class="reference internal" href="#id196">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2008-12-12">2.2beta1 (2008-12-12)</a><ul>
<li><a class="reference internal" href="#id197">Features added</a></li>
<li><a class="reference internal" href="#id198">Bugs fixed</a></li>
<li><a class="reference internal" href="#id199">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id200">2.1.4 (2008-12-12)</a><ul>
<li><a class="reference internal" href="#id201">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id202">2.0.11 (2008-12-12)</a><ul>
<li><a class="reference internal" href="#id203">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha1-2008-11-23">2.2alpha1 (2008-11-23)</a><ul>
<li><a class="reference internal" href="#id204">Features added</a></li>
<li><a class="reference internal" href="#id205">Bugs fixed</a></li>
<li><a class="reference internal" href="#id206">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id207">2.1.3 (2008-11-17)</a><ul>
<li><a class="reference internal" href="#id208">Features added</a></li>
<li><a class="reference internal" href="#id209">Bugs fixed</a></li>
<li><a class="reference internal" href="#id210">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id211">2.0.10 (2008-11-17)</a><ul>
<li><a class="reference internal" href="#id212">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id213">2.1.2 (2008-09-05)</a><ul>
<li><a class="reference internal" href="#id214">Features added</a></li>
<li><a class="reference internal" href="#id215">Bugs fixed</a></li>
<li><a class="reference internal" href="#id216">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id217">2.0.9 (2008-09-05)</a><ul>
<li><a class="reference internal" href="#id218">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id219">2.1.1 (2008-07-24)</a><ul>
<li><a class="reference internal" href="#id220">Features added</a></li>
<li><a class="reference internal" href="#id221">Bugs fixed</a></li>
<li><a class="reference internal" href="#id222">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id223">2.0.8 (2008-07-24)</a><ul>
<li><a class="reference internal" href="#id224">Features added</a></li>
<li><a class="reference internal" href="#id225">Bugs fixed</a></li>
<li><a class="reference internal" href="#id226">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id227">2.1 (2008-07-09)</a><ul>
<li><a class="reference internal" href="#id228">Features added</a></li>
<li><a class="reference internal" href="#id229">Bugs fixed</a></li>
<li><a class="reference internal" href="#id230">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id231">2.0.7 (2008-06-20)</a><ul>
<li><a class="reference internal" href="#id232">Features added</a></li>
<li><a class="reference internal" href="#id233">Bugs fixed</a></li>
<li><a class="reference internal" href="#id234">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta3-2008-06-19">2.1beta3 (2008-06-19)</a><ul>
<li><a class="reference internal" href="#id235">Features added</a></li>
<li><a class="reference internal" href="#id236">Bugs fixed</a></li>
<li><a class="reference internal" href="#id237">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id238">2.0.6 (2008-05-31)</a><ul>
<li><a class="reference internal" href="#id239">Features added</a></li>
<li><a class="reference internal" href="#id240">Bugs fixed</a></li>
<li><a class="reference internal" href="#id241">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta2-2008-05-02">2.1beta2 (2008-05-02)</a><ul>
<li><a class="reference internal" href="#id242">Features added</a></li>
<li><a class="reference internal" href="#id243">Bugs fixed</a></li>
<li><a class="reference internal" href="#id244">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id245">2.0.5 (2008-05-01)</a><ul>
<li><a class="reference internal" href="#id246">Features added</a></li>
<li><a class="reference internal" href="#id247">Bugs fixed</a></li>
<li><a class="reference internal" href="#id248">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#beta1-2008-04-15">2.1beta1 (2008-04-15)</a><ul>
<li><a class="reference internal" href="#id249">Features added</a></li>
<li><a class="reference internal" href="#id250">Bugs fixed</a></li>
<li><a class="reference internal" href="#id251">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id252">2.0.4 (2008-04-13)</a><ul>
<li><a class="reference internal" href="#id253">Features added</a></li>
<li><a class="reference internal" href="#id254">Bugs fixed</a></li>
<li><a class="reference internal" href="#id255">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alpha1-2008-03-27">2.1alpha1 (2008-03-27)</a><ul>
<li><a class="reference internal" href="#id256">Features added</a></li>
<li><a class="reference internal" href="#id257">Bugs fixed</a></li>
<li><a class="reference internal" href="#id258">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id259">2.0.3 (2008-03-26)</a><ul>
<li><a class="reference internal" href="#id260">Features added</a></li>
<li><a class="reference internal" href="#id261">Bugs fixed</a></li>
<li><a class="reference internal" href="#id262">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id263">2.0.2 (2008-02-22)</a><ul>
<li><a class="reference internal" href="#id264">Features added</a></li>
<li><a class="reference internal" href="#id265">Bugs fixed</a></li>
<li><a class="reference internal" href="#id266">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id267">2.0.1 (2008-02-13)</a><ul>
<li><a class="reference internal" href="#id268">Features added</a></li>
<li><a class="reference internal" href="#id269">Bugs fixed</a></li>
<li><a class="reference internal" href="#id270">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id271">2.0 (2008-02-01)</a><ul>
<li><a class="reference internal" href="#id272">Features added</a></li>
<li><a class="reference internal" href="#id273">Bugs fixed</a></li>
<li><a class="reference internal" href="#id274">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id275">1.3.6 (2007-10-29)</a><ul>
<li><a class="reference internal" href="#id276">Bugs fixed</a></li>
<li><a class="reference internal" href="#id277">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id278">1.3.5 (2007-10-22)</a><ul>
<li><a class="reference internal" href="#id279">Features added</a></li>
<li><a class="reference internal" href="#id280">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id281">1.3.4 (2007-08-30)</a><ul>
<li><a class="reference internal" href="#id282">Features added</a></li>
<li><a class="reference internal" href="#id283">Bugs fixed</a></li>
<li><a class="reference internal" href="#id284">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id285">1.3.3 (2007-07-26)</a><ul>
<li><a class="reference internal" href="#id286">Features added</a></li>
<li><a class="reference internal" href="#id287">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id288">1.3.2 (2007-07-03)</a><ul>
<li><a class="reference internal" href="#id289">Features added</a></li>
<li><a class="reference internal" href="#id290">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id291">1.3.1 (2007-07-02)</a><ul>
<li><a class="reference internal" href="#id292">Features added</a></li>
<li><a class="reference internal" href="#id293">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id294">1.3 (2007-06-24)</a><ul>
<li><a class="reference internal" href="#id295">Features added</a></li>
<li><a class="reference internal" href="#id296">Bugs fixed</a></li>
<li><a class="reference internal" href="#id297">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id298">1.2.1 (2007-02-27)</a><ul>
<li><a class="reference internal" href="#id299">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id300">1.2 (2007-02-20)</a><ul>
<li><a class="reference internal" href="#id301">Features added</a></li>
<li><a class="reference internal" href="#id302">Bugs fixed</a></li>
<li><a class="reference internal" href="#id303">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id304">1.1.2 (2006-10-30)</a><ul>
<li><a class="reference internal" href="#id305">Features added</a></li>
<li><a class="reference internal" href="#id306">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id307">1.1.1 (2006-09-21)</a><ul>
<li><a class="reference internal" href="#id308">Features added</a></li>
<li><a class="reference internal" href="#id309">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id310">1.1 (2006-09-13)</a><ul>
<li><a class="reference internal" href="#id311">Features added</a></li>
<li><a class="reference internal" href="#id312">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id313">1.0.4 (2006-09-09)</a><ul>
<li><a class="reference internal" href="#id314">Features added</a></li>
<li><a class="reference internal" href="#id315">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id316">1.0.3 (2006-08-08)</a><ul>
<li><a class="reference internal" href="#id317">Features added</a></li>
<li><a class="reference internal" href="#id318">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id319">1.0.2 (2006-06-27)</a><ul>
<li><a class="reference internal" href="#id320">Features added</a></li>
<li><a class="reference internal" href="#id321">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id322">1.0.1 (2006-06-09)</a><ul>
<li><a class="reference internal" href="#id323">Features added</a></li>
<li><a class="reference internal" href="#id324">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id325">1.0 (2006-06-01)</a><ul>
<li><a class="reference internal" href="#id326">Features added</a></li>
<li><a class="reference internal" href="#id327">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id328">0.9.2 (2006-05-10)</a><ul>
<li><a class="reference internal" href="#id329">Features added</a></li>
<li><a class="reference internal" href="#id330">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id331">0.9.1 (2006-03-30)</a><ul>
<li><a class="reference internal" href="#id332">Features added</a></li>
<li><a class="reference internal" href="#id333">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id334">0.9 (2006-03-20)</a><ul>
<li><a class="reference internal" href="#id335">Features added</a></li>
<li><a class="reference internal" href="#id336">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id337">0.8 (2005-11-03)</a><ul>
<li><a class="reference internal" href="#id338">Features added</a></li>
<li><a class="reference internal" href="#id339">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id340">0.7 (2005-06-15)</a><ul>
<li><a class="reference internal" href="#id341">Features added</a></li>
<li><a class="reference internal" href="#id342">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id343">0.6 (2005-05-14)</a><ul>
<li><a class="reference internal" href="#id344">Features added</a></li>
<li><a class="reference internal" href="#id345">Bugs fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id346">0.5.1 (2005-04-09)</a></li>
<li><a class="reference internal" href="#id347">0.5 (2005-04-08)</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">lxml</a>
        
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>lxml changelog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/changes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>

          <nav class="docs-nav">
            <a href="tutorial.html">Tutorial</a>
            <a href="docindex.html">Docs</a>
            <a href="api_reference.html">API Reference</a>
            <a href="genindex.html">Index</a>
          </nav>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lxml-changelog">
<h1>lxml changelog<a class="headerlink" href="#lxml-changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>3.7.2 (2017-01-08)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bugs-fixed">
<h3>Bugs fixed<a class="headerlink" href="#bugs-fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Work around installation problems in recent Python 2.7 versions
due to FTP download failures.</li>
<li>GH#219: <code class="docutils literal"><span class="pre">xmlfile.element()</span></code> was not properly quoting attribute values.
Patch by Burak Arslan.</li>
<li>GH#218: <code class="docutils literal"><span class="pre">xmlfile.element()</span></code> was not properly escaping text content of
script/style tags.  Patch by Burak Arslan.</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>3.7.1 (2016-12-23)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>No source changes, issued only to solve problems with the
binary packages released for 3.7.0.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>3.7.0 (2016-12-10)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="features-added">
<h3>Features added<a class="headerlink" href="#features-added" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#217: <code class="docutils literal"><span class="pre">XMLSyntaxError</span></code> now behaves more like its <code class="docutils literal"><span class="pre">SyntaxError</span></code>
baseclass.  Patch by Philipp A.</li>
<li>GH#216: <code class="docutils literal"><span class="pre">HTMLParser()</span></code> now supports the same <code class="docutils literal"><span class="pre">collect_ids</span></code> parameter
as <code class="docutils literal"><span class="pre">XMLParser()</span></code>.  Patch by Burak Arslan.</li>
<li>GH#210: Allow specifying a serialisation method in <code class="docutils literal"><span class="pre">xmlfile.write()</span></code>.
Patch by Burak Arslan.</li>
<li>GH#203: New option <code class="docutils literal"><span class="pre">default_doctype</span></code> in <code class="docutils literal"><span class="pre">HTMLParser</span></code> that allows
disabling the automatic doctype creation.  Patch by Shadab Zafar.</li>
<li>GH#201: Calling the method <code class="docutils literal"><span class="pre">.set('attrname')</span></code> without value argument
(or <code class="docutils literal"><span class="pre">None</span></code>) on HTML elements creates an attribute without value that
serialises like <code class="docutils literal"><span class="pre">&lt;div</span> <span class="pre">attrname&gt;&lt;/div&gt;</span></code>.  Patch by Daniel Holth.</li>
<li>GH#197: Ignore form input fields in <code class="docutils literal"><span class="pre">form_values()</span></code> when they are
marked as <code class="docutils literal"><span class="pre">disabled</span></code> in HTML.  Patch by Kristian Klemon.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Bugs fixed<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#206: File name and line number were missing from XSLT error messages.
Patch by Marcus Brinkmann.</li>
</ul>
</div>
<div class="section" id="other-changes">
<h3>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Log entries no longer allow anything but plain string objects as message text
and file name.</li>
<li><code class="docutils literal"><span class="pre">zlib</span></code> is included in the list of statically built libraries.</li>
</ul>
</div>
</div>
<div class="section" id="id5">
<h2>3.6.4 (2016-08-20)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>GH#204, LP#1614693: build fix for MacOS-X.</li>
</ul>
</div>
<div class="section" id="id6">
<h2>3.6.3 (2016-08-18)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>LP#1614603: change linker flags to build multi-linux wheels</li>
</ul>
</div>
<div class="section" id="id7">
<h2>3.6.2 (2016-08-18)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>LP#1614603: release without source changes to provide cleanly built Linux wheels</li>
</ul>
</div>
<div class="section" id="id8">
<h2>3.6.1 (2016-07-24)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Features added<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#180: Separate option <code class="docutils literal"><span class="pre">inline_style</span></code> for Cleaner that only removes <code class="docutils literal"><span class="pre">style</span></code>
attributes instead of all styles.  Patch by Christian Pedersen.</li>
<li>GH#196: Windows build support for Python 3.5.  Contribution by Maximilian Hils.</li>
</ul>
</div>
<div class="section" id="id10">
<h3>Bugs fixed<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#199: Exclude <code class="docutils literal"><span class="pre">file</span></code> fields from <code class="docutils literal"><span class="pre">FormElement.form_values</span></code> (as browsers do).
Patch by Tomas Divis.</li>
<li>GH#198, LP#1568167: Try to provide base URL from <code class="docutils literal"><span class="pre">Resolver.resolve_string()</span></code>.
Patch by Michael van Tellingen.</li>
<li>GH#191: More accurate float serialisation in <code class="docutils literal"><span class="pre">objectify.FloatElement</span></code>.
Patch by Holger Joukl.</li>
<li>LP#1551797: Repair XSLT error logging. Patch by Marcus Brinkmann.</li>
</ul>
</div>
</div>
<div class="section" id="id11">
<h2>3.6.0 (2016-03-17)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Features added<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#187: Now supports (only) version 5.x and later of PyPy.
Patch by Armin Rigo.</li>
<li>GH#181: Direct support for <code class="docutils literal"><span class="pre">.rnc</span></code> files in <cite>RelaxNG()</cite> if <code class="docutils literal"><span class="pre">rnc2rng</span></code>
is installed.  Patch by Dirkjan Ochtman.</li>
</ul>
</div>
<div class="section" id="id13">
<h3>Bugs fixed<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#189: Static builds honour FTP proxy configurations when downloading
the external libs.  Patch by Youhei Sakurai.</li>
<li>GH#186: Soupparser failed to process entities in Python 3.x.
Patch by Duncan Morris.</li>
<li>GH#185: Rare encoding related <code class="docutils literal"><span class="pre">TypeError</span></code> on import was fixed.
Patch by Petr Demin.</li>
</ul>
</div>
</div>
<div class="section" id="id14">
<h2>3.5.0 (2015-11-13)<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id15">
<h3>Bugs fixed<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Unicode string results failed XPath queries in PyPy.</li>
<li>LP#1497051: HTML target parser failed to terminate on exceptions
and continued parsing instead.</li>
<li>Deprecated API usage in doctestcompare.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2015-09-18">
<h2>3.5.0b1 (2015-09-18)<a class="headerlink" href="#b1-2015-09-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>Features added<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cleanup_namespaces()</span></code> accepts a new argument <code class="docutils literal"><span class="pre">keep_ns_prefixes</span></code>
that does not remove definitions of the provided prefix-namespace
mapping from the tree.</li>
<li><code class="docutils literal"><span class="pre">cleanup_namespaces()</span></code> accepts a new argument <code class="docutils literal"><span class="pre">top_nsmap</span></code> that
moves definitions of the provided prefix-namespace mapping to the
top of the tree.</li>
<li>LP#1490451: <code class="docutils literal"><span class="pre">Element</span></code> objects gained a <code class="docutils literal"><span class="pre">cssselect()</span></code> method as
known from <code class="docutils literal"><span class="pre">lxml.html</span></code>.  Patch by Simon Sapin.</li>
<li>API functions and methods behave and look more like Python functions,
which allows introspection on them etc.  One side effect to be aware of
is that the functions now bind as methods when assigned to a class
variable.  A quick fix is to wrap them in <code class="docutils literal"><span class="pre">staticmethod()</span></code> (as for
normal Python functions).</li>
<li>ISO-Schematron support gained an option <code class="docutils literal"><span class="pre">error_finder</span></code> that allows
passing a filter function for picking validation errors from reports.</li>
<li>LP#1243600: Elements in <code class="docutils literal"><span class="pre">lxml.html</span></code> gained a <code class="docutils literal"><span class="pre">classes</span></code> property
that provides a set-like interface to the <code class="docutils literal"><span class="pre">class</span></code> attribute.
Original patch by masklinn.</li>
<li>LP#1341964: The soupparser now handles DOCTYPE declarations, comments
and processing instructions outside of the root element.
Patch by Olli Pottonen.</li>
<li>LP#1421512: The <code class="docutils literal"><span class="pre">docinfo</span></code> of a tree was made editable to allow
setting and removing the public ID and system ID of the DOCTYPE.
Patch by Olli Pottonen.</li>
<li>LP#1442427: More work-arounds for quirks and bugs in pypy and pypy3.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.soupparser</span></code> now uses BeautifulSoup version 4 instead
of version 3 if available.</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Bugs fixed<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory errors that occur during tree adaptations (e.g. moving subtrees
to foreign documents) could leave the tree in a crash prone state.</li>
<li>Calling <code class="docutils literal"><span class="pre">process_children()</span></code> in an XSLT extension element without
an <code class="docutils literal"><span class="pre">output_parent</span></code> argument failed with a <code class="docutils literal"><span class="pre">TypeError</span></code>.
Fix by Jens Tröger.</li>
<li>GH#162: Image data in HTML <code class="docutils literal"><span class="pre">data</span></code> URLs is considered safe and
no longer removed by <code class="docutils literal"><span class="pre">lxml.html.clean</span></code> JavaScript cleaner.</li>
<li>GH#166: Static build could link libraries in wrong order.</li>
<li>GH#172: Rely a bit more on libxml2 for encoding detection rather than
rolling our own in some cases.  Patch by Olli Pottonen.</li>
<li>GH#159: Validity checks for names and string content were tightened
to detect the use of illegal characters early.  Patch by Olli Pottonen.</li>
<li>LP#1421921: Comments/PIs before the DOCTYPE declaration were not
serialised.  Patch by Olli Pottonen.</li>
<li>LP#659367: Some HTML DOCTYPE declarations were not serialised.
Patch by Olli Pottonen.</li>
<li>LP#1238503: lxml.doctestcompare is now consistent with stdlib&#8217;s doctest
in how it uses <code class="docutils literal"><span class="pre">+</span></code> and <code class="docutils literal"><span class="pre">-</span></code> to refer to unexpected and missing output.</li>
<li>Empty prefixes are explicitly rejected when a namespace mapping is used
with ElementPath to avoid hiding bugs in user code.</li>
<li>Several problems with PyPy were fixed by switching to Cython 0.23.</li>
</ul>
</div>
</div>
<div class="section" id="id18">
<h2>3.4.4 (2015-04-25)<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id19">
<h3>Bugs fixed<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An ElementTree compatibility test added in lxml 3.4.3 that failed in
Python 3.4+ was removed again.</li>
</ul>
</div>
</div>
<div class="section" id="id20">
<h2>3.4.3 (2015-04-15)<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>Bugs fixed<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Expression cache in ElementPath was ignored.  Fix by Changaco.</li>
<li>LP#1426868: Passing a default namespace and a prefixed namespace mapping
as nsmap into <code class="docutils literal"><span class="pre">xmlfile.element()</span></code> raised a <code class="docutils literal"><span class="pre">TypeError</span></code>.</li>
<li>LP#1421927: DOCTYPE system URLs were incorrectly quoted when containing
double quotes.  Patch by Olli Pottonen.</li>
<li>LP#1419354: meta-redirect URLs were incorrectly processed by
<code class="docutils literal"><span class="pre">iterlinks()</span></code> if preceded by whitespace.</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2>3.4.2 (2015-02-07)<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>Bugs fixed<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1415907: Crash when creating an XMLSchema from a non-root element
of an XML document.</li>
<li>LP#1369362: HTML cleaning failed when hitting processing instructions
with pseudo-attributes.</li>
<li><code class="docutils literal"><span class="pre">CDATA()</span></code> wrapped content was rejected for tail text.</li>
<li>CDATA sections were not serialised as tail text of the top-level element.</li>
</ul>
</div>
</div>
<div class="section" id="id24">
<h2>3.4.1 (2014-11-20)<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>Features added<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New <code class="docutils literal"><span class="pre">htmlfile</span></code> HTML generator to accompany the incremental <code class="docutils literal"><span class="pre">xmlfile</span></code>
serialisation API.  Patch by Burak Arslan.</li>
</ul>
</div>
<div class="section" id="id26">
<h3>Bugs fixed<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.sax.ElementTreeContentHandler</span></code> did not initialise its superclass.</li>
</ul>
</div>
</div>
<div class="section" id="id27">
<h2>3.4.0 (2014-09-10)<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id28">
<h3>Features added<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">xmlfile(buffered=False)</span></code> disables output buffering and flushes the
content after each API operation (starting/ending element blocks or writes).
A new method <code class="docutils literal"><span class="pre">xf.flush()</span></code> can alternatively be used to explicitly flush
the output.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.document_fromstring</span></code> has a new option <code class="docutils literal"><span class="pre">ensure_head_body=True</span></code>
which will add an empty head and/or body element to the result document if
missing.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.iterlinks</span></code> now returns links inside meta refresh tags.</li>
<li>New <code class="docutils literal"><span class="pre">XMLParser</span></code> option <code class="docutils literal"><span class="pre">collect_ids=False</span></code> to disable ID hash table
creation.  This can substantially speed up parsing of documents with many
different IDs that are not used.</li>
<li>The parser uses per-document hash tables for XML IDs.  This reduces the
load of the global parser dict and speeds up parsing for documents with
many different IDs.</li>
<li><code class="docutils literal"><span class="pre">ElementTree.getelementpath(element)</span></code> returns a structural ElementPath
expression for the given element, which can be used for lookups later.</li>
<li><code class="docutils literal"><span class="pre">xmlfile()</span></code> accepts a new argument <code class="docutils literal"><span class="pre">close=True</span></code> to close file(-like)
objects after writing to them.  Before, <code class="docutils literal"><span class="pre">xmlfile()</span></code> only closed the file
if it had opened it internally.</li>
<li>Allow &#8220;bytearray&#8221; type for ASCII text input.</li>
</ul>
</div>
<div class="section" id="id29">
<h3>Bugs fixed<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id30">
<h3>Other changes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#400588: decoding errors have become hard errors even in recovery mode.
Previously, they could lead to an internal tree representation in a mixed
encoding state, which lead to very late errors or even silently incorrect
behaviour during tree traversal or serialisation.</li>
<li>Requires Python 2.6, 2.7, 3.2 or later. No longer supports
Python 2.4, 2.5 and 3.1, use lxml 3.3.x for those.</li>
<li>Requires libxml2 2.7.0 or later and libxslt 1.1.23 or later,
use lxml 3.3.x with older versions.</li>
</ul>
</div>
</div>
<div class="section" id="id31">
<h2>3.3.6 (2014-08-28)<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>Bugs fixed<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Prevent tree cycle creation when adding Elements as siblings.</li>
<li>LP#1361948: crash when deallocating Element siblings without parent.</li>
<li>LP#1354652: crash when traversing internally loaded documents in XSLT
extension functions.</li>
</ul>
</div>
</div>
<div class="section" id="id33">
<h2>3.3.5 (2014-04-18)<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id34">
<h3>Bugs fixed<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>HTML cleaning could fail to strip javascript links that mix control
characters into the link scheme.</li>
</ul>
</div>
</div>
<div class="section" id="id35">
<h2>3.3.4 (2014-04-03)<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id36">
<h3>Features added<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Source line numbers above 65535 are available on Elements when
using libxml2 2.9 or later.</li>
</ul>
</div>
<div class="section" id="id37">
<h3>Bugs fixed<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.html.fragment_fromstring()</span></code> failed for bytes input in Py3.</li>
</ul>
</div>
<div class="section" id="id38">
<h3>Other changes<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id39">
<h2>3.3.3 (2014-03-04)<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id40">
<h3>Bugs fixed<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1287118: Crash when using Element subtypes with <code class="docutils literal"><span class="pre">__slots__</span></code>.</li>
</ul>
</div>
<div class="section" id="id41">
<h3>Other changes<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The internal classes <code class="docutils literal"><span class="pre">_LogEntry</span></code> and <code class="docutils literal"><span class="pre">_Attrib</span></code> can no longer be
subclassed from Python code.</li>
</ul>
</div>
</div>
<div class="section" id="id42">
<h2>3.3.2 (2014-02-26)<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id43">
<h3>Bugs fixed<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The properties <code class="docutils literal"><span class="pre">resolvers</span></code> and <code class="docutils literal"><span class="pre">version</span></code>, as well as the methods
<code class="docutils literal"><span class="pre">set_element_class_lookup()</span></code> and <code class="docutils literal"><span class="pre">makeelement()</span></code>, were lost from
<code class="docutils literal"><span class="pre">iterparse</span></code> objects in 3.3.0.</li>
<li>LP#1222132: instances of <code class="docutils literal"><span class="pre">XMLSchema</span></code>, <code class="docutils literal"><span class="pre">Schematron</span></code> and <code class="docutils literal"><span class="pre">RelaxNG</span></code>
did not clear their local <code class="docutils literal"><span class="pre">error_log</span></code> before running a validation.</li>
<li>LP#1238500: lxml.doctestcompare mixed up &#8220;expected&#8221; and &#8220;actual&#8221; in
attribute values.</li>
<li>Some file I/O tests were failing in MS-Windows due to non-portable temp
file usage.  Initial patch by Gabi Davar.</li>
<li>LP#910014: duplicate IDs in a document were not reported by DTD validation.</li>
<li>LP#1185332: <code class="docutils literal"><span class="pre">tostring(method=&quot;html&quot;)</span></code> did not use HTML serialisation
semantics for trailing tail text.  Initial patch by Sylvain Viollon.</li>
<li>LP#1281139: <code class="docutils literal"><span class="pre">.attrib</span></code> value of Comments lost its mutation methods
in 3.3.0.  Even though it is empty and immutable, it should still
provide the same interface as that returned for Elements.</li>
</ul>
</div>
</div>
<div class="section" id="id44">
<h2>3.3.1 (2014-02-12)<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id45">
<h3>Features added<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id46">
<h3>Bugs fixed<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1014290: HTML documents parsed with <code class="docutils literal"><span class="pre">parser.feed()</span></code> failed to find
elements during tag iteration.</li>
<li>LP#1273709: Building in PyPy failed due to missing support for
<code class="docutils literal"><span class="pre">PyUnicode_Compare()</span></code> and <code class="docutils literal"><span class="pre">PyByteArray_*()</span></code> in PyPy&#8217;s C-API.</li>
<li>LP#1274413: Compilation in MSVC failed due to missing &#8220;stdint.h&#8221; standard
header file.</li>
<li>LP#1274118: iterparse() failed to parse BOM prefixed files.</li>
</ul>
</div>
<div class="section" id="id47">
<h3>Other changes<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id48">
<h2>3.3.0 (2014-01-26)<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id49">
<h3>Features added<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id50">
<h3>Bugs fixed<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The heuristic that distinguishes file paths from URLs was tightened
to produce less false negatives.</li>
</ul>
</div>
<div class="section" id="id51">
<h3>Other changes<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="beta5-2014-01-18">
<h2>3.3.0beta5 (2014-01-18)<a class="headerlink" href="#beta5-2014-01-18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id52">
<h3>Features added<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The PEP 393 unicode parsing support gained a fallback for wchar strings
which might still be somewhat common on Windows systems.</li>
</ul>
</div>
<div class="section" id="id53">
<h3>Bugs fixed<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Several error handling problems were fixed throughout the code base that
could previously lead to exceptions being silently swallowed or not
properly reported.</li>
<li>The C-API function <code class="docutils literal"><span class="pre">appendChild()</span></code> is now deprecated as it does not
propagate exceptions (its return type is <code class="docutils literal"><span class="pre">void</span></code>).  The new function
<code class="docutils literal"><span class="pre">appendChildToElement()</span></code> was added as a safe replacement.</li>
<li>Passing a string into <code class="docutils literal"><span class="pre">fromstringlist()</span></code> raises an exception instead of
parsing the string character by character.</li>
</ul>
</div>
<div class="section" id="id54">
<h3>Other changes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Document cleanup code was simplified using the new GC features in
Cython 0.20.</li>
</ul>
</div>
</div>
<div class="section" id="beta4-2014-01-12">
<h2>3.3.0beta4 (2014-01-12)<a class="headerlink" href="#beta4-2014-01-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id55">
<h3>Features added<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id56">
<h3>Bugs fixed<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The (empty) value returned by the <code class="docutils literal"><span class="pre">attrib</span></code> property of Entity and Comment
objects was mutable.</li>
<li>Element class lookup wasn&#8217;t available for the new pull parsers or when using
a custom parser target.</li>
<li>Setting Element attributes on instantiation with both the <code class="docutils literal"><span class="pre">attrib</span></code> argument
and keyword arguments could modify the mapping passed as <code class="docutils literal"><span class="pre">attrib</span></code>.</li>
<li>LP#1266171: DTDs instantiated from internal/external subsets (i.e. through
the docinfo property) lost their attribute declarations.</li>
</ul>
</div>
<div class="section" id="id57">
<h3>Other changes<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Built with Cython 0.20pre (gitrev 012ae82eb) to prepare support for
Python 3.4.</li>
</ul>
</div>
</div>
<div class="section" id="beta3-2014-01-02">
<h2>3.3.0beta3 (2014-01-02)<a class="headerlink" href="#beta3-2014-01-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Features added<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Unicode string parsing was optimised for Python 3.3 (PEP 393).</li>
</ul>
</div>
<div class="section" id="id59">
<h3>Bugs fixed<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>HTML parsing of Unicode strings could misdecode the input on some platforms.</li>
<li>Crash in xmlfile() when closing open elements out of order in an error case.</li>
</ul>
</div>
<div class="section" id="id60">
<h3>Other changes<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="beta2-2013-12-20">
<h2>3.3.0beta2 (2013-12-20)<a class="headerlink" href="#beta2-2013-12-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id61">
<h3>Features added<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">iterparse()</span></code> supports the <code class="docutils literal"><span class="pre">recover</span></code> option.</li>
</ul>
</div>
<div class="section" id="id62">
<h3>Bugs fixed<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in <code class="docutils literal"><span class="pre">iterparse()</span></code> for HTML parsing.</li>
<li>Crash in target parsing with attributes.</li>
</ul>
</div>
<div class="section" id="id63">
<h3>Other changes<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The safety check in the read-only tree implementation (e.g. used by
<code class="docutils literal"><span class="pre">PythonElementClassLookup</span></code>) raises a more appropriate <code class="docutils literal"><span class="pre">ReferenceError</span></code>
for illegal access after tree disposal instead of an <code class="docutils literal"><span class="pre">AssertionError</span></code>.
This should only impact test code that specifically checks the original
behaviour.</li>
</ul>
</div>
</div>
<div class="section" id="beta1-2013-12-12">
<h2>3.3.0beta1 (2013-12-12)<a class="headerlink" href="#beta1-2013-12-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id64">
<h3>Features added<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New option <code class="docutils literal"><span class="pre">handle_failures</span></code> in <code class="docutils literal"><span class="pre">make_links_absolute()</span></code> and
<code class="docutils literal"><span class="pre">resolve_base_href()</span></code> (lxml.html) that enables ignoring or
discarding links that fail to parse as URLs.</li>
<li>New parser classes <code class="docutils literal"><span class="pre">XMLPullParser</span></code> and <code class="docutils literal"><span class="pre">HTMLPullParser</span></code> for
incremental parsing, as implemented for ElementTree in Python 3.4.</li>
<li><code class="docutils literal"><span class="pre">iterparse()</span></code> enables recovery mode by default for HTML parsing
(<code class="docutils literal"><span class="pre">html=True</span></code>).</li>
</ul>
</div>
<div class="section" id="id65">
<h3>Bugs fixed<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1255132: crash when trying to run validation over non-Element (e.g.
comment or PI).</li>
<li>Error messages in the log and in exception messages that originated
from libxml2 could accidentally be picked up from preceding warnings
instead of the actual error.</li>
<li>The <code class="docutils literal"><span class="pre">ElementMaker</span></code> in lxml.objectify did not accept a dict as
argument for adding attributes to the element it&#8217;s building. This
works as in lxml.builder now.</li>
<li>LP#1228881: <code class="docutils literal"><span class="pre">repr(XSLTAccessControl)</span></code> failed in Python 3.</li>
<li>Raise <code class="docutils literal"><span class="pre">ValueError</span></code> when trying to append an Element to itself or
to one of its own descendants, instead of running into an infinite
loop.</li>
<li>LP#1206077: htmldiff discarded whitespace from the output.</li>
<li>Compressed plain-text serialisation to file-like objects was broken.</li>
<li>lxml.html.formfill: Fix textarea form filling.
The textarea used to be cleared before the new content was set,
which removed the name attribute.</li>
</ul>
</div>
<div class="section" id="id66">
<h3>Other changes<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Some basic API classes use freelists internally for faster
instantiation.  This can speed up some <code class="docutils literal"><span class="pre">iterparse()</span></code> scenarios,
for example.</li>
<li><code class="docutils literal"><span class="pre">iterparse()</span></code> was rewritten to use the new <code class="docutils literal"><span class="pre">*PullParser</span></code>
classes internally instead of being a parser itself.</li>
</ul>
</div>
</div>
<div class="section" id="id67">
<h2>3.2.5 (2014-01-02)<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id68">
<h3>Features added<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id69">
<h3>Bugs fixed<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in xmlfile() when closing open elements out of order in an error case.</li>
<li>Crash in target parsing with attributes.</li>
<li>LP#1255132: crash when trying to run validation over non-Element (e.g.
comment or PI).</li>
</ul>
</div>
<div class="section" id="id70">
<h3>Other changes<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id71">
<h2>3.2.4 (2013-11-07)<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id72">
<h3>Features added<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id73">
<h3>Bugs fixed<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory leak when creating an XPath evaluator in a thread.</li>
<li>LP#1228881: <code class="docutils literal"><span class="pre">repr(XSLTAccessControl)</span></code> failed in Python 3.</li>
<li>Raise <code class="docutils literal"><span class="pre">ValueError</span></code> when trying to append an Element to itself or
to one of its own descendants.</li>
<li>LP#1206077: htmldiff discarded whitespace from the output.</li>
<li>Compressed plain-text serialisation to file-like objects was broken.</li>
</ul>
</div>
<div class="section" id="id74">
<h3>Other changes<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id75">
<h2>3.2.3 (2013-07-28)<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id76">
<h3>Bugs fixed<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix support for Python 2.4 which was lost in 3.2.2.</li>
</ul>
</div>
</div>
<div class="section" id="id77">
<h2>3.2.2 (2013-07-28)<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id78">
<h3>Features added<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id79">
<h3>Bugs fixed<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1185701: spurious XMLSyntaxError after finishing iterparse().</li>
<li>Crash in lxml.objectify during xsi annotation.</li>
</ul>
</div>
<div class="section" id="id80">
<h3>Other changes<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Return values of user provided element class lookup methods are now
validated against the type of the XML node they represent to prevent
API class mismatches.</li>
</ul>
</div>
</div>
<div class="section" id="id81">
<h2>3.2.1 (2013-05-11)<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id82">
<h3>Features added<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The methods <code class="docutils literal"><span class="pre">apply_templates()</span></code> and <code class="docutils literal"><span class="pre">process_children()</span></code> of XSLT
extension elements have gained two new boolean options <code class="docutils literal"><span class="pre">elements_only</span></code>
and <code class="docutils literal"><span class="pre">remove_blank_text</span></code> that discard either all strings or whitespace-only
strings from the result list.</li>
</ul>
</div>
<div class="section" id="id83">
<h3>Bugs fixed<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When moving Elements to another tree, the namespace cleanup mechanism
no longer drops namespace prefixes from attributes for which it finds
a default namespace declaration, to prevent them from appearing as
unnamespaced attributes after serialisation.</li>
<li>Returning non-type objects from a custom class lookup method could lead
to a crash.</li>
<li>Instantiating and using subtypes of Comments and ProcessingInstructions
crashed.</li>
</ul>
</div>
<div class="section" id="id84">
<h3>Other changes<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id85">
<h2>3.2.0 (2013-04-28)<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id86">
<h3>Features added<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id87">
<h3>Bugs fixed<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#690319: Leading whitespace could change the behaviour of the string
parsing functions in <code class="docutils literal"><span class="pre">lxml.html</span></code>.</li>
<li>LP#599318: The string parsing functions in <code class="docutils literal"><span class="pre">lxml.html</span></code> are more robust
in the face of uncommon HTML content like framesets or missing body tags.
Patch by Stefan Seelmann.</li>
<li>LP#712941: I/O errors while trying to access files with paths that contain
non-ASCII characters could raise <code class="docutils literal"><span class="pre">UnicodeDecodeError</span></code> instead of properly
reporting the <code class="docutils literal"><span class="pre">IOError</span></code>.</li>
<li>LP#673205: Parsing from in-memory strings disabled network access in the
default parser and made subsequent attempts to parse from a URL fail.</li>
<li>LP#971754: lxml.html.clean appends &#8216;nofollow&#8217; to &#8216;rel&#8217; attributes instead
of overwriting the current value.</li>
<li>LP#715687: lxml.html.clean no longer discards scripts that are explicitly
allowed by the user provided whitelist.  Patch by Christine Koppelt.</li>
</ul>
</div>
<div class="section" id="id88">
<h3>Other changes<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id89">
<h2>3.1.2 (2013-04-12)<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id90">
<h3>Features added<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id91">
<h3>Bugs fixed<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1136509: Passing attributes through the namespace-unaware API of
the sax bridge (i.e. the <code class="docutils literal"><span class="pre">handler.startElement()</span></code> method) failed
with a <code class="docutils literal"><span class="pre">TypeError</span></code>.  Patch by Mike Bayer.</li>
<li>LP#1123074: Fix serialisation error in XSLT output when converting
the result tree to a Unicode string.</li>
<li>GH#105: Replace illegal usage of <code class="docutils literal"><span class="pre">xmlBufLength()</span></code> in libxml2 2.9.0
by properly exported API function <code class="docutils literal"><span class="pre">xmlBufUse()</span></code>.</li>
</ul>
</div>
<div class="section" id="id92">
<h3>Other changes<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id93">
<h2>3.1.1 (2013-03-29)<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id94">
<h3>Features added<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id95">
<h3>Bugs fixed<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1160386: Write access to <code class="docutils literal"><span class="pre">lxml.html.FormElement.fields</span></code> raised
an AttributeError in Py3.</li>
<li>Illegal memory access during cleanup in incremental xmlfile writer.</li>
</ul>
</div>
<div class="section" id="id96">
<h3>Other changes<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The externally useless class <code class="docutils literal"><span class="pre">lxml.etree._BaseParser</span></code> was removed
from the module dict.</li>
</ul>
</div>
</div>
<div class="section" id="id97">
<h2>3.1.0 (2013-02-10)<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id98">
<h3>Features added<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GH#89: lxml.html.clean allows overriding the set of attributes that it
considers &#8216;safe&#8217;.  Patch by Francis Devereux.</li>
</ul>
</div>
<div class="section" id="id99">
<h3>Bugs fixed<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1104370: <code class="docutils literal"><span class="pre">copy.copy(el.attrib)</span></code> raised an exception.  It now returns
a copy of the attributes as a plain Python dict.</li>
<li>GH#95: When used with namespace prefixes, the  <code class="docutils literal"><span class="pre">el.find*()</span></code> methods
always used the first namespace mapping that was provided for each
path expression instead of using the one that was actually passed
in for the current run.</li>
<li>LP#1092521, GH#91: Fix undefined C symbol in Python runtimes compiled
without threading support.  Patch by Ulrich Seidl.</li>
</ul>
</div>
<div class="section" id="id100">
<h3>Other changes<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="beta1-2012-12-21">
<h2>3.1beta1 (2012-12-21)<a class="headerlink" href="#beta1-2012-12-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id101">
<h3>Features added<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New build-time option <code class="docutils literal"><span class="pre">--with-unicode-strings</span></code> for Python 2 that
makes the API always return Unicode strings for names and text
instead of byte strings for plain ASCII content.</li>
<li>New incremental XML file writing API <code class="docutils literal"><span class="pre">etree.xmlfile()</span></code>.</li>
<li>E factory in lxml.objectify is callable to simplify the creation of
tags with non-identifier names without having to resort to getattr().</li>
</ul>
</div>
<div class="section" id="id102">
<h3>Bugs fixed<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When starting from a non-namespaced element in lxml.objectify, searching
for a child without explicitly specifying a namespace incorrectly found
namespaced elements with the requested local name, instead of restricting
the search to non-namespaced children.</li>
<li>GH#85: Deprecation warnings were fixed for Python 3.x.</li>
<li>GH#33: lxml.html.fromstring() failed to accept bytes input in Py3.</li>
<li>LP#1080792: Static build of libxml2 2.9.0 failed due to missing file.</li>
</ul>
</div>
<div class="section" id="id103">
<h3>Other changes<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The externally useless class <code class="docutils literal"><span class="pre">_ObjectifyElementMakerCaller</span></code> was
removed from the module API of lxml.objectify.</li>
<li>LP#1075622: lxml.builder is faster for adding text to elements with
many children.  Patch by Anders Hammarquist.</li>
</ul>
</div>
</div>
<div class="section" id="id104">
<h2>3.0.2 (2012-12-14)<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id105">
<h3>Features added<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id106">
<h3>Bugs fixed<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix crash during interpreter shutdown by switching to Cython 0.17.3 for building.</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Other changes<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id108">
<h2>3.0.1 (2012-10-14)<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id109">
<h3>Features added<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id110">
<h3>Bugs fixed<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LP#1065924: Element proxies could disappear during garbage collection
in PyPy without proper cleanup.</li>
<li>GH#71: Failure to work with libxml2 2.6.x.</li>
<li>LP#1065139: static MacOS-X build failed in Py3.</li>
</ul>
</div>
<div class="section" id="id111">
<h3>Other changes<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id112">
<h2>3.0 (2012-10-08)<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id113">
<h3>Features added<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id114">
<h3>Bugs fixed<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>End-of-file handling was incorrect in iterparse() when reading from
a low-level C file stream and failed in libxml2 2.9.0 due to its
improved consistency checks.</li>
</ul>
</div>
<div class="section" id="id115">
<h3>Other changes<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The build no longer uses Cython by default unless the generated C files
are missing.  To use Cython, pass the option &#8220;&#8211;with-cython&#8221;.  To ignore
the fatal build error when Cython is required but not available (e.g. to
run special setup.py commands that do not actually run a build), pass
&#8220;&#8211;without-cython&#8221;.</li>
</ul>
</div>
</div>
<div class="section" id="beta1-2012-09-26">
<h2>3.0beta1 (2012-09-26)<a class="headerlink" href="#beta1-2012-09-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id116">
<h3>Features added<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python level access to (optional) libxml2 memory debugging features
to simplify debugging of memory leaks etc.</li>
</ul>
</div>
<div class="section" id="id117">
<h3>Bugs fixed<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a memory leak in XPath by switching to Cython 0.17.1.</li>
<li>Some tests were adapted to work with PyPy.</li>
</ul>
</div>
<div class="section" id="id118">
<h3>Other changes<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The code was adapted to work with the upcoming libxml2 2.9.0 release.</li>
</ul>
</div>
</div>
<div class="section" id="alpha2-2012-08-23">
<h2>3.0alpha2 (2012-08-23)<a class="headerlink" href="#alpha2-2012-08-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id119">
<h3>Features added<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">.iter()</span></code> method of elements now accepts <code class="docutils literal"><span class="pre">tag</span></code> arguments like
<code class="docutils literal"><span class="pre">&quot;{*}name&quot;</span></code> to search for elements with a given local name in any
namespace. With this addition, all combinations of wildcards now work
as expected:
<code class="docutils literal"><span class="pre">&quot;{ns}name&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;{}name&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;{*}name&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;{ns}*&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;{}*&quot;</span></code>
and <code class="docutils literal"><span class="pre">&quot;{*}*&quot;</span></code>.  Note that <code class="docutils literal"><span class="pre">&quot;name&quot;</span></code> is equivalent to <code class="docutils literal"><span class="pre">&quot;{}name&quot;</span></code>,
but <code class="docutils literal"><span class="pre">&quot;*&quot;</span></code> is <code class="docutils literal"><span class="pre">&quot;{*}*&quot;</span></code>.
The same change applies to the <code class="docutils literal"><span class="pre">.getiterator()</span></code>, <code class="docutils literal"><span class="pre">.itersiblings()</span></code>,
<code class="docutils literal"><span class="pre">.iterancestors()</span></code>, <code class="docutils literal"><span class="pre">.iterdescendants()</span></code>, <code class="docutils literal"><span class="pre">.iterchildren()</span></code>
and <code class="docutils literal"><span class="pre">.itertext()</span></code> methods;the <code class="docutils literal"><span class="pre">strip_attributes()</span></code>,
<code class="docutils literal"><span class="pre">strip_elements()</span></code> and <code class="docutils literal"><span class="pre">strip_tags()</span></code> functions as well as the
<code class="docutils literal"><span class="pre">iterparse()</span></code> class.  Patch by Simon Sapin.</li>
<li>C14N allows specifying the inclusive prefixes to be promoted
to top-level during exclusive serialisation.</li>
</ul>
</div>
<div class="section" id="id120">
<h3>Bugs fixed<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Passing long Unicode strings into the <code class="docutils literal"><span class="pre">feed()</span></code> parser interface
failed to read the entire string.</li>
</ul>
</div>
<div class="section" id="id121">
<h3>Other changes<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="alpha1-2012-07-31">
<h2>3.0alpha1 (2012-07-31)<a class="headerlink" href="#alpha1-2012-07-31" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id122">
<h3>Features added<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initial support for building in PyPy (through cpyext).</li>
<li>DTD objects gained an API that allows read access to their
declarations.</li>
<li><code class="docutils literal"><span class="pre">xpathgrep.py</span></code> gained support for parsing line-by-line (e.g.
from grep output) and for surrounding the output with a new root
tag.</li>
<li><code class="docutils literal"><span class="pre">E-factory</span></code> in <code class="docutils literal"><span class="pre">lxml.builder</span></code> accepts subtypes of known data
types (such as string subtypes) when building elements around them.</li>
<li>Tree iteration and <code class="docutils literal"><span class="pre">iterparse()</span></code> with a selective <code class="docutils literal"><span class="pre">tag</span></code>
argument supports passing a set of tags.  Tree nodes will be
returned by the iterators if they match any of the tags.</li>
</ul>
</div>
<div class="section" id="id123">
<h3>Bugs fixed<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">.find*()</span></code> methods in <code class="docutils literal"><span class="pre">lxml.objectify</span></code> no longer use XPath
internally, which makes them faster in many cases (especially when
short circuiting after a single or couple of elements) and fixes
some behavioural differences compared to <code class="docutils literal"><span class="pre">lxml.etree</span></code>.  Note that
this means that they no longer support arbitrary XPath expressions
but only the subset that the <code class="docutils literal"><span class="pre">ElementPath</span></code> language supports.
The previous implementation was also redundant with the normal
XPath support, which can be used as a replacement.</li>
<li><code class="docutils literal"><span class="pre">el.find('*')</span></code> could accidentally return a comment or processing
instruction that happened to be in the wrong spot.  (Same for the
other <code class="docutils literal"><span class="pre">.find*()</span></code> methods.)</li>
<li>The error logging is less intrusive and avoids a global setup where
possible.</li>
<li>Fixed undefined names in html5lib parser.</li>
<li><code class="docutils literal"><span class="pre">xpathgrep.py</span></code> did not work in Python 3.</li>
<li><code class="docutils literal"><span class="pre">Element.attrib.update()</span></code> did not accept an <code class="docutils literal"><span class="pre">attrib</span></code> of
another Element as parameter.</li>
<li>For subtypes of <code class="docutils literal"><span class="pre">ElementBase</span></code> that make the <code class="docutils literal"><span class="pre">.text</span></code> or <code class="docutils literal"><span class="pre">.tail</span></code>
properties immutable (as in objectify, for example), inserting text
when creating Elements through the E-Factory feature of the class
constructor would fail with an exception, stating that the text
cannot be modified.</li>
</ul>
</div>
<div class="section" id="id124">
<h3>Other changes<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The code base was overhauled to properly use &#8216;const&#8217; where the API
of libxml2 and libxslt requests it.  This also has an impact on the
public C-API of lxml itself, as defined in <code class="docutils literal"><span class="pre">etreepublic.pxd</span></code>, as
well as the provided declarations in the <code class="docutils literal"><span class="pre">lxml/includes/</span></code> directory.
Code that uses these declarations may have to be adapted.  On the
plus side, this fixes several C compiler warnings, also for user
code, thus making it easier to spot real problems again.</li>
<li>The functionality of &#8220;lxml.cssselect&#8221; was moved into a separate PyPI
package called &#8220;cssselect&#8221;.  To continue using it, you must install
that package separately.  The &#8220;lxml.cssselect&#8221; module is still
available and provides the same interface, provided the &#8220;cssselect&#8221;
package can be imported at runtime.</li>
<li>Element attributes passed in as an <code class="docutils literal"><span class="pre">attrib</span></code> dict or as keyword
arguments are now sorted by (namespaced) name before being created
to make their order predictable for serialisation and iteration.
Note that adding or deleting attributes afterwards does not take
that order into account, i.e. setting a new attribute appends it
after the existing ones.</li>
<li>Several classes that are for internal use only were removed
from the <code class="docutils literal"><span class="pre">lxml.etree</span></code> module dict:
<code class="docutils literal"><span class="pre">_InputDocument,</span> <span class="pre">_ResolverRegistry,</span> <span class="pre">_ResolverContext,</span> <span class="pre">_BaseContext,</span>
<span class="pre">_ExsltRegExp,</span> <span class="pre">_IterparseContext,</span> <span class="pre">_TempStore,</span> <span class="pre">_ExceptionContext,</span>
<span class="pre">__ContentOnlyElement,</span> <span class="pre">_AttribIterator,</span> <span class="pre">_NamespaceRegistry,</span>
<span class="pre">_ClassNamespaceRegistry,</span> <span class="pre">_FunctionNamespaceRegistry,</span>
<span class="pre">_XPathFunctionNamespaceRegistry,</span> <span class="pre">_ParserDictionaryContext,</span>
<span class="pre">_FileReaderContext,</span> <span class="pre">_ParserContext,</span> <span class="pre">_PythonSaxParserTarget,</span>
<span class="pre">_TargetParserContext,</span> <span class="pre">_ReadOnlyProxy,</span> <span class="pre">_ReadOnlyPIProxy,</span>
<span class="pre">_ReadOnlyEntityProxy,</span> <span class="pre">_ReadOnlyElementProxy,</span> <span class="pre">_OpaqueNodeWrapper,</span>
<span class="pre">_OpaqueDocumentWrapper,</span> <span class="pre">_ModifyContentOnlyProxy,</span>
<span class="pre">_ModifyContentOnlyPIProxy,</span> <span class="pre">_ModifyContentOnlyEntityProxy,</span>
<span class="pre">_AppendOnlyElementProxy,</span> <span class="pre">_SaxParserContext,</span> <span class="pre">_FilelikeWriter,</span>
<span class="pre">_ParserSchemaValidationContext,</span> <span class="pre">_XPathContext,</span>
<span class="pre">_XSLTResolverContext,</span> <span class="pre">_XSLTContext,</span> <span class="pre">_XSLTQuotedStringParam</span></code></li>
<li>Several internal classes can no longer be inherited from:
<code class="docutils literal"><span class="pre">_InputDocument,</span> <span class="pre">_ResolverRegistry,</span> <span class="pre">_ExsltRegExp,</span> <span class="pre">_ElementUnicodeResult,</span>
<span class="pre">_IterparseContext,</span> <span class="pre">_TempStore,</span> <span class="pre">_AttribIterator,</span> <span class="pre">_ClassNamespaceRegistry,</span>
<span class="pre">_XPathFunctionNamespaceRegistry,</span> <span class="pre">_ParserDictionaryContext,</span>
<span class="pre">_FileReaderContext,</span> <span class="pre">_PythonSaxParserTarget,</span> <span class="pre">_TargetParserContext,</span>
<span class="pre">_ReadOnlyPIProxy,</span> <span class="pre">_ReadOnlyEntityProxy,</span> <span class="pre">_OpaqueDocumentWrapper,</span>
<span class="pre">_ModifyContentOnlyPIProxy,</span> <span class="pre">_ModifyContentOnlyEntityProxy,</span>
<span class="pre">_AppendOnlyElementProxy,</span> <span class="pre">_FilelikeWriter,</span> <span class="pre">_ParserSchemaValidationContext,</span>
<span class="pre">_XPathContext,</span> <span class="pre">_XSLTResolverContext,</span> <span class="pre">_XSLTContext,</span> <span class="pre">_XSLTQuotedStringParam,</span>
<span class="pre">_XSLTResultTree,</span> <span class="pre">_XSLTProcessingInstruction</span></code></li>
</ul>
</div>
</div>
<div class="section" id="id125">
<h2>2.3.6 (2012-09-28)<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id126">
<h3>Features added<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id127">
<h3>Bugs fixed<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Passing long Unicode strings into the <code class="docutils literal"><span class="pre">feed()</span></code> parser interface
failed to read the entire string.</li>
</ul>
</div>
<div class="section" id="id128">
<h3>Other changes<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id129">
<h2>2.3.5 (2012-07-31)<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id130">
<h3>Features added<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id131">
<h3>Bugs fixed<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when merging text nodes in <code class="docutils literal"><span class="pre">element.remove()</span></code>.</li>
<li>Crash in sax/target parser when reporting empty doctype.</li>
</ul>
</div>
<div class="section" id="id132">
<h3>Other changes<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id133">
<h2>2.3.4 (2012-03-26)<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id134">
<h3>Features added<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id135">
<h3>Bugs fixed<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when building an nsmap (Element property) with empty
namespace URIs.</li>
<li>Crash due to race condition when errors (or user messages) occur
during threaded XSLT processing.</li>
<li>XSLT stylesheet compilation could ignore compilation errors.</li>
</ul>
</div>
<div class="section" id="id136">
<h3>Other changes<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id137">
<h2>2.3.3 (2012-01-04)<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id138">
<h3>Features added<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.html.tostring()</span></code> gained new serialisation options
<code class="docutils literal"><span class="pre">with_tail</span></code> and <code class="docutils literal"><span class="pre">doctype</span></code>.</li>
</ul>
</div>
<div class="section" id="id139">
<h3>Bugs fixed<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a crash when using <code class="docutils literal"><span class="pre">iterparse()</span></code> for HTML parsing and
requesting start events.</li>
<li>Fixed parsing of more selectors in cssselect.  Whitespace before
pseudo-elements and pseudo-classes is significant as it is a
descendant combinator.
&#8220;E :pseudo&#8221; should parse the same as &#8220;E *:pseudo&#8221;, not &#8220;E:pseudo&#8221;.
Patch by Simon Sapin.</li>
<li>lxml.html.diff no longer raises an exception when hitting
&#8216;img&#8217; tags without &#8216;src&#8217; attribute.</li>
</ul>
</div>
<div class="section" id="id140">
<h3>Other changes<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id141">
<h2>2.3.2 (2011-11-11)<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id142">
<h3>Features added<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.objectify.deannotate()</span></code> has a new boolean option
<code class="docutils literal"><span class="pre">cleanup_namespaces</span></code> to remove the objectify namespace
declarations (and generally clean up the namespace declarations)
after removing the type annotations.</li>
<li><code class="docutils literal"><span class="pre">lxml.objectify</span></code> gained its own <code class="docutils literal"><span class="pre">SubElement()</span></code> function as a
copy of <code class="docutils literal"><span class="pre">etree.SubElement</span></code> to avoid an otherwise redundant import
of <code class="docutils literal"><span class="pre">lxml.etree</span></code> on the user side.</li>
</ul>
</div>
<div class="section" id="id143">
<h3>Bugs fixed<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed the &#8220;descendant&#8221; bug in cssselect a second time (after a first
fix in lxml 2.3.1).  The previous change resulted in a serious
performance regression for the XPath based evaluation of the
translated expression.  Note that this breaks the usage of some of
the generated XPath expressions as XSLT location paths that
previously worked in 2.3.1.</li>
<li>Fixed parsing of some selectors in cssselect. Whitespace after combinators
&#8220;&gt;&#8221;, &#8220;+&#8221; and &#8220;~&#8221; is now correctly ignored. Previously is was parsed as
a descendant combinator. For example, &#8220;div&gt; .foo&#8221; was parsed the same as
&#8220;div&gt;* .foo&#8221; instead of &#8220;div&gt;.foo&#8221;. Patch by Simon Sapin.</li>
</ul>
</div>
<div class="section" id="id144">
<h3>Other changes<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id145">
<h2>2.3.1 (2011-09-25)<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id146">
<h3>Features added<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New option <code class="docutils literal"><span class="pre">kill_tags</span></code> in <code class="docutils literal"><span class="pre">lxml.html.clean</span></code> to remove specific
tags and their content (i.e. their whole subtree).</li>
<li><code class="docutils literal"><span class="pre">pi.get()</span></code> and <code class="docutils literal"><span class="pre">pi.attrib</span></code> on processing instructions to parse
pseudo-attributes from the text content of processing instructions.</li>
<li><code class="docutils literal"><span class="pre">lxml.get_include()</span></code> returns a list of include paths that can be
used to compile external C code against lxml.etree.  This is
specifically required for statically linked lxml builds when code
needs to compile against the exact same header file versions as lxml
itself.</li>
<li><code class="docutils literal"><span class="pre">Resolver.resolve_file()</span></code> takes an additional option
<code class="docutils literal"><span class="pre">close_file</span></code> that configures if the file(-like) object will be
closed after reading or not.  By default, the file will be closed,
as the user is not expected to keep a reference to it.</li>
</ul>
</div>
<div class="section" id="id147">
<h3>Bugs fixed<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>HTML cleaning didn&#8217;t remove &#8216;data:&#8217; links.</li>
<li>The html5lib parser integration now uses the &#8216;official&#8217;
implementation in html5lib itself, which makes it work with newer
releases of the library.</li>
<li>In <code class="docutils literal"><span class="pre">lxml.sax</span></code>, <code class="docutils literal"><span class="pre">endElementNS()</span></code> could incorrectly reject a plain
tag name when the corresponding start event inferred the same plain
tag name to be in the default namespace.</li>
<li>When an open file-like object is passed into <code class="docutils literal"><span class="pre">parse()</span></code> or
<code class="docutils literal"><span class="pre">iterparse()</span></code>, the parser will no longer close it after use.  This
reverts a change in lxml 2.3 where all files would be closed.  It is
the users responsibility to properly close the file(-like) object,
also in error cases.</li>
<li>Assertion error in lxml.html.cleaner when discarding top-level elements.</li>
<li>In lxml.cssselect, use the xpath &#8216;A//B&#8217; (short for
&#8216;A/descendant-or-self::node()/B&#8217;) instead of &#8216;A/descendant::B&#8217; for
the css descendant selector (&#8216;A B&#8217;).  This makes a few edge cases
like <code class="docutils literal"><span class="pre">&quot;div</span> <span class="pre">*:last-child&quot;</span></code> consistent with the selector behavior in
WebKit and Firefox, and makes more css expressions valid location
paths (for use in xsl:template match).</li>
<li>In lxml.html, non-selected <code class="docutils literal"><span class="pre">&lt;option&gt;</span></code> tags no longer show up in the
collected form values.</li>
<li>Adding/removing <code class="docutils literal"><span class="pre">&lt;option&gt;</span></code> values to/from a multiple select form
field properly selects them and unselects them.</li>
</ul>
</div>
<div class="section" id="id148">
<h3>Other changes<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Static builds can specify the download directory with the
<code class="docutils literal"><span class="pre">--download-dir</span></code> option.</li>
</ul>
</div>
</div>
<div class="section" id="id149">
<h2>2.3 (2011-02-06)<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id150">
<h3>Features added<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When looking for children, <code class="docutils literal"><span class="pre">lxml.objectify</span></code> takes &#8216;{}tag&#8217; as
meaning an empty namespace, as opposed to the parent namespace.</li>
</ul>
</div>
<div class="section" id="id151">
<h3>Bugs fixed<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When finished reading from a file-like object, the parser
immediately calls its <code class="docutils literal"><span class="pre">.close()</span></code> method.</li>
<li>When finished parsing, <code class="docutils literal"><span class="pre">iterparse()</span></code> immediately closes the input
file.</li>
<li>Work-around for libxml2 bug that can leave the HTML parser in a
non-functional state after parsing a severely broken document (fixed
in libxml2 2.7.8).</li>
<li><code class="docutils literal"><span class="pre">marque</span></code> tag in HTML cleanup code is correctly named <code class="docutils literal"><span class="pre">marquee</span></code>.</li>
</ul>
</div>
<div class="section" id="id152">
<h3>Other changes<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Some public functions in the Cython-level C-API have more explicit
return types.</li>
</ul>
</div>
</div>
<div class="section" id="beta1-2010-09-06">
<h2>2.3beta1 (2010-09-06)<a class="headerlink" href="#beta1-2010-09-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id153">
<h3>Features added<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id154">
<h3>Bugs fixed<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in newer libxml2 versions when moving elements between
documents that had attributes on replaced XInclude nodes.</li>
<li><code class="docutils literal"><span class="pre">XMLID()</span></code> function was missing the optional <code class="docutils literal"><span class="pre">parser</span></code> and
<code class="docutils literal"><span class="pre">base_url</span></code> parameters.</li>
<li>Searching for wildcard tags in <code class="docutils literal"><span class="pre">iterparse()</span></code> was broken in Py3.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.open_in_browser()</span></code> didn&#8217;t work in Python 3 due to the
use of os.tempnam.  It now takes an optional &#8216;encoding&#8217; parameter.</li>
</ul>
</div>
<div class="section" id="id155">
<h3>Other changes<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="alpha2-2010-07-24">
<h2>2.3alpha2 (2010-07-24)<a class="headerlink" href="#alpha2-2010-07-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id156">
<h3>Features added<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id157">
<h3>Bugs fixed<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in XSLT when generating text-only result documents with a
stylesheet created in a different thread.</li>
</ul>
</div>
<div class="section" id="id158">
<h3>Other changes<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">repr()</span></code> of Element objects shows the hex ID with leading 0x
(following ElementTree 1.3).</li>
</ul>
</div>
</div>
<div class="section" id="alpha1-2010-06-19">
<h2>2.3alpha1 (2010-06-19)<a class="headerlink" href="#alpha1-2010-06-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id159">
<h3>Features added<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Keyword argument <code class="docutils literal"><span class="pre">namespaces</span></code> in <code class="docutils literal"><span class="pre">lxml.cssselect.CSSSelector()</span></code>
to pass a prefix-to-namespace mapping for the selector.</li>
<li>New function <code class="docutils literal"><span class="pre">lxml.etree.register_namespace(prefix,</span> <span class="pre">uri)</span></code> that
globally registers a namespace prefix for a namespace that newly
created Elements in that namespace will use automatically.  Follows
ElementTree 1.3.</li>
<li>Support &#8216;unicode&#8217; string name as encoding parameter in
<code class="docutils literal"><span class="pre">tostring()</span></code>, following ElementTree 1.3.</li>
<li>Support &#8216;c14n&#8217; serialisation method in <code class="docutils literal"><span class="pre">ElementTree.write()</span></code> and
<code class="docutils literal"><span class="pre">tostring()</span></code>, following ElementTree 1.3.</li>
<li>The ElementPath expression syntax (<code class="docutils literal"><span class="pre">el.find*()</span></code>) was extended to
match the upcoming ElementTree 1.3 that will ship in the standard
library of Python 3.2/2.7.  This includes extended support for
predicates as well as namespace prefixes (as known from XPath).</li>
<li>During regular XPath evaluation, various ESXLT functions are
available within their namespace when using libxslt 1.1.26 or later.</li>
<li>Support passing a readily configured logger instance into
<code class="docutils literal"><span class="pre">PyErrorLog</span></code>, instead of a logger name.</li>
<li>On serialisation, the new <code class="docutils literal"><span class="pre">doctype</span></code> parameter can be used to
override the DOCTYPE (internal subset) of the document.</li>
<li>New parameter <code class="docutils literal"><span class="pre">output_parent</span></code> to <code class="docutils literal"><span class="pre">XSLTExtension.apply_templates()</span></code>
to append the resulting content directly to an output element.</li>
<li><code class="docutils literal"><span class="pre">XSLTExtension.process_children()</span></code> to process the content of the
XSLT extension element itself.</li>
<li>ISO-Schematron support based on the de-facto Schematron reference
&#8216;skeleton implementation&#8217;.</li>
<li>XSLT objects now take XPath object as <code class="docutils literal"><span class="pre">__call__</span></code> stylesheet
parameters.</li>
<li>Enable path caching in ElementPath (<code class="docutils literal"><span class="pre">el.find*()</span></code>) to avoid parsing
overhead.</li>
<li>Setting the value of a namespaced attribute always uses a prefixed
namespace instead of the default namespace even if both declare the
same namespace URI.  This avoids serialisation problems when an
attribute from a default namespace is set on an element from a
different namespace.</li>
<li>XSLT extension elements: support for XSLT context nodes other than
elements: document root, comments, processing instructions.</li>
<li>Support for strings (in addition to Elements) in node-sets returned
by extension functions.</li>
<li>Forms that lack an <code class="docutils literal"><span class="pre">action</span></code> attribute default to the base URL of
the document on submit.</li>
<li>XPath attribute result strings have an <code class="docutils literal"><span class="pre">attrname</span></code> property.</li>
<li>Namespace URIs get validated against RFC 3986 at the API level
(required by the XML namespace specification).</li>
<li>Target parsers show their target object in the <code class="docutils literal"><span class="pre">.target</span></code> property
(compatible with ElementTree).</li>
</ul>
</div>
<div class="section" id="id160">
<h3>Bugs fixed<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>API is hardened against invalid proxy instances to prevent crashes
due to incorrectly instantiated Element instances.</li>
<li>Prevent crash when instantiating <code class="docutils literal"><span class="pre">CommentBase</span></code> and friends.</li>
<li>Export ElementTree compatible XML parser class as
<code class="docutils literal"><span class="pre">XMLTreeBuilder</span></code>, as it is called in ET 1.2.</li>
<li>ObjectifiedDataElements in lxml.objectify were not hashable.  They
now use the hash value of the underlying Python value (string,
number, etc.) to which they compare equal.</li>
<li>Parsing broken fragments in lxml.html could fail if the fragment
contained an orphaned closing &#8216;&lt;/div&gt;&#8217; tag.</li>
<li>Using XSLT extension elements around the root of the output document
crashed.</li>
<li><code class="docutils literal"><span class="pre">lxml.cssselect</span></code> did not distinguish between <code class="docutils literal"><span class="pre">x[attr=&quot;val&quot;]</span></code> and
<code class="docutils literal"><span class="pre">x</span> <span class="pre">[attr=&quot;val&quot;]</span></code> (with a space).  The latter now matches the
attribute independent of the element.</li>
<li>Rewriting multiple links inside of HTML text content could end up
replacing unrelated content as replacements could impact the
reported position of subsequent matches.  Modifications are now
simplified by letting the <code class="docutils literal"><span class="pre">iterlinks()</span></code> generator in <code class="docutils literal"><span class="pre">lxml.html</span></code>
return links in reversed order if they appear inside the same text
node.  Thus, replacements and link-internal modifications no longer
change the position of links reported afterwards.</li>
<li>The <code class="docutils literal"><span class="pre">.value</span></code> attribute of <code class="docutils literal"><span class="pre">textarea</span></code> elements in lxml.html did
not represent the complete raw value (including child tags etc.). It
now serialises the complete content on read and replaces the
complete content by a string on write.</li>
<li>Target parser didn&#8217;t call <code class="docutils literal"><span class="pre">.close()</span></code> on the target object if
parsing failed.  Now it is guaranteed that <code class="docutils literal"><span class="pre">.close()</span></code> will be
called after parsing, regardless of the outcome.</li>
</ul>
</div>
<div class="section" id="id161">
<h3>Other changes<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Official support for Python 3.1.2 and later.</li>
<li>Static MS Windows builds can now download their dependencies
themselves.</li>
<li><code class="docutils literal"><span class="pre">Element.attrib</span></code> no longer uses a cyclic reference back to its
Element object.  It therefore no longer requires the garbage
collector to clean up.</li>
<li>Static builds include libiconv, in addition to libxml2 and libxslt.</li>
</ul>
</div>
</div>
<div class="section" id="id162">
<h2>2.2.8 (2010-09-02)<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id163">
<h3>Bugs fixed<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in newer libxml2 versions when moving elements between
documents that had attributes on replaced XInclude nodes.</li>
<li>Import fix for urljoin in Python 3.1+.</li>
</ul>
</div>
</div>
<div class="section" id="id164">
<h2>2.2.7 (2010-07-24)<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id165">
<h3>Bugs fixed<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in XSLT when generating text-only result documents with a
stylesheet created in a different thread.</li>
</ul>
</div>
</div>
<div class="section" id="id166">
<h2>2.2.6 (2010-03-02)<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id167">
<h3>Bugs fixed<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed several Python 3 regressions by building with Cython 0.11.3.</li>
</ul>
</div>
</div>
<div class="section" id="id168">
<h2>2.2.5 (2010-02-28)<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id169">
<h3>Features added<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for running XSLT extension elements on the input root node
(e.g. in a template matching on &#8220;/&#8221;).</li>
</ul>
</div>
<div class="section" id="id170">
<h3>Bugs fixed<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in XPath evaluation when reading smart strings from a document
other than the original context document.</li>
<li>Support recent versions of html5lib by not requiring its
<code class="docutils literal"><span class="pre">XHTMLParser</span></code> in <code class="docutils literal"><span class="pre">htmlparser.py</span></code> anymore.</li>
<li>Manually instantiating the custom element classes in
<code class="docutils literal"><span class="pre">lxml.objectify</span></code> could crash.</li>
<li>Invalid XML text characters were not rejected by the API when they
appeared in unicode strings directly after non-ASCII characters.</li>
<li>lxml.html.open_http_urllib() did not work in Python 3.</li>
<li>The functions <code class="docutils literal"><span class="pre">strip_tags()</span></code> and <code class="docutils literal"><span class="pre">strip_elements()</span></code> in
<code class="docutils literal"><span class="pre">lxml.etree</span></code> did not remove all occurrences of a tag in all cases.</li>
<li>Crash in XSLT extension elements when the XSLT context node is not
an element.</li>
</ul>
</div>
</div>
<div class="section" id="id171">
<h2>2.2.4 (2009-11-11)<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id172">
<h3>Bugs fixed<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Static build of libxml2/libxslt was broken.</li>
</ul>
</div>
</div>
<div class="section" id="id173">
<h2>2.2.3 (2009-10-30)<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id174">
<h3>Features added<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id175">
<h3>Bugs fixed<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">resolve_entities</span></code> option did not work in the incremental feed
parser.</li>
<li>Looking up and deleting attributes without a namespace could hit a
namespaced attribute of the same name instead.</li>
<li>Late errors during calls to <code class="docutils literal"><span class="pre">SubElement()</span></code> (e.g. attribute related
ones) could leave a partially initialised element in the tree.</li>
<li>Modifying trees that contain parsed entity references could result
in an infinite loop.</li>
<li>ObjectifiedElement.__setattr__ created an empty-string child element when the
attribute value was rejected as a non-unicode/non-ascii string</li>
<li>Syntax errors in <code class="docutils literal"><span class="pre">lxml.cssselect</span></code> could result in misleading error
messages.</li>
<li>Invalid syntax in CSS expressions could lead to an infinite loop in
the parser of <code class="docutils literal"><span class="pre">lxml.cssselect</span></code>.</li>
<li>CSS special character escapes were not properly handled in
<code class="docutils literal"><span class="pre">lxml.cssselect</span></code>.</li>
<li>CSS Unicode escapes were not properly decoded in <code class="docutils literal"><span class="pre">lxml.cssselect</span></code>.</li>
<li>Select options in HTML forms that had no explicit <code class="docutils literal"><span class="pre">value</span></code>
attribute were not handled correctly.  The HTML standard dictates
that their value is defined by their text content.  This is now
supported by lxml.html.</li>
<li>XPath raised a TypeError when finding CDATA sections.  This is now
fully supported.</li>
<li>Calling <code class="docutils literal"><span class="pre">help(lxml.objectify)</span></code> didn&#8217;t work at the prompt.</li>
<li>The <code class="docutils literal"><span class="pre">ElementMaker</span></code> in lxml.objectify no longer defines the default
namespaces when annotation is disabled.</li>
<li>Feed parser failed to honour the &#8216;recover&#8217; option on parse errors.</li>
<li>Diverting the error logging to Python&#8217;s logging system was broken.</li>
</ul>
</div>
<div class="section" id="id176">
<h3>Other changes<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id177">
<h2>2.2.2 (2009-06-21)<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id178">
<h3>Features added<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New helper functions <code class="docutils literal"><span class="pre">strip_attributes()</span></code>, <code class="docutils literal"><span class="pre">strip_elements()</span></code>,
<code class="docutils literal"><span class="pre">strip_tags()</span></code> in lxml.etree to remove attributes/subtrees/tags
from a subtree.</li>
</ul>
</div>
<div class="section" id="id179">
<h3>Bugs fixed<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Namespace cleanup on subtree insertions could result in missing
namespace declarations (and potentially crashes) if the element
defining a namespace was deleted and the namespace was not used by
the top element of the inserted subtree but only in deeper subtrees.</li>
<li>Raising an exception from a parser target callback didn&#8217;t always
terminate the parser.</li>
<li>Only {true, false, 1, 0} are accepted as the lexical representation for
BoolElement ({True, False, T, F, t, f} not any more), restoring lxml &lt;= 2.0
behaviour.</li>
</ul>
</div>
<div class="section" id="id180">
<h3>Other changes<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id181">
<h2>2.2.1 (2009-06-02)<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id182">
<h3>Features added<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Injecting default attributes into a document during XML Schema
validation (also at parse time).</li>
<li>Pass <code class="docutils literal"><span class="pre">huge_tree</span></code> parser option to disable parser security
restrictions imposed by libxml2 2.7.</li>
</ul>
</div>
<div class="section" id="id183">
<h3>Bugs fixed<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The script for statically building libxml2 and libxslt didn&#8217;t work
in Py3.</li>
<li><code class="docutils literal"><span class="pre">XMLSchema()</span></code> also passes invalid schema documents on to libxml2
for parsing (which could lead to a crash before release 2.6.24).</li>
</ul>
</div>
<div class="section" id="id184">
<h3>Other changes<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id185">
<h2>2.2 (2009-03-21)<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id186">
<h3>Features added<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for <code class="docutils literal"><span class="pre">standalone</span></code> flag in XML declaration through
<code class="docutils literal"><span class="pre">tree.docinfo.standalone</span></code> and by passing <code class="docutils literal"><span class="pre">standalone=True/False</span></code>
on serialisation.</li>
</ul>
</div>
<div class="section" id="id187">
<h3>Bugs fixed<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when parsing an XML Schema with external imports from a
filename.</li>
</ul>
</div>
</div>
<div class="section" id="beta4-2009-02-27">
<h2>2.2beta4 (2009-02-27)<a class="headerlink" href="#beta4-2009-02-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id188">
<h3>Features added<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support strings and instantiable Element classes as child arguments
to the constructor of custom Element classes.</li>
<li>GZip compression support for serialisation to files and file-like
objects.</li>
</ul>
</div>
<div class="section" id="id189">
<h3>Bugs fixed<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deep-copying an ElementTree copied neither its sibling PIs and
comments nor its internal/external DTD subsets.</li>
<li>Soupparser failed on broken attributes without values.</li>
<li>Crash in XSLT when overwriting an already defined attribute using
<code class="docutils literal"><span class="pre">xsl:attribute</span></code>.</li>
<li>Crash bug in exception handling code under Python 3.  This was due
to a problem in Cython, not lxml itself.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.FormElement._name()</span></code> failed for non top-level forms.</li>
<li><code class="docutils literal"><span class="pre">TAG</span></code> special attribute in constructor of custom Element classes
was evaluated incorrectly.</li>
</ul>
</div>
<div class="section" id="id190">
<h3>Other changes<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Official support for Python 3.0.1.</li>
<li><code class="docutils literal"><span class="pre">Element.findtext()</span></code> now returns an empty string instead of None
for Elements without text content.</li>
</ul>
</div>
</div>
<div class="section" id="beta3-2009-02-17">
<h2>2.2beta3 (2009-02-17)<a class="headerlink" href="#beta3-2009-02-17" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id191">
<h3>Features added<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">XSLT.strparam()</span></code> class method to wrap quoted string parameters
that require escaping.</li>
</ul>
</div>
<div class="section" id="id192">
<h3>Bugs fixed<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory leak in XPath evaluators.</li>
<li>Crash when parsing indented XML in one thread and merging it with
other documents parsed in another thread.</li>
<li>Setting the <code class="docutils literal"><span class="pre">base</span></code> attribute in <code class="docutils literal"><span class="pre">lxml.objectify</span></code> from a unicode
string failed.</li>
<li>Fixes following changes in Python 3.0.1.</li>
<li>Minor fixes for Python 3.</li>
</ul>
</div>
<div class="section" id="id193">
<h3>Other changes<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The global error log (which is copied into the exception log) is now
local to a thread, which fixes some race conditions.</li>
<li>More robust error handling on serialisation.</li>
</ul>
</div>
</div>
<div class="section" id="beta2-2009-01-25">
<h2>2.2beta2 (2009-01-25)<a class="headerlink" href="#beta2-2009-01-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id194">
<h3>Bugs fixed<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Potential memory leak on exception handling.  This was due to a
problem in Cython, not lxml itself.</li>
<li><code class="docutils literal"><span class="pre">iter_links</span></code> (and related link-rewriting functions) in
<code class="docutils literal"><span class="pre">lxml.html</span></code> would interpret CSS like <code class="docutils literal"><span class="pre">url(&quot;link&quot;)</span></code> incorrectly
(treating the quotation marks as part of the link).</li>
<li>Failing import on systems that have an <code class="docutils literal"><span class="pre">io</span></code> module.</li>
</ul>
</div>
</div>
<div class="section" id="id195">
<h2>2.1.5 (2009-01-06)<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id196">
<h3>Bugs fixed<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Potential memory leak on exception handling.  This was due to a
problem in Cython, not lxml itself.</li>
<li>Failing import on systems that have an <code class="docutils literal"><span class="pre">io</span></code> module.</li>
</ul>
</div>
</div>
<div class="section" id="beta1-2008-12-12">
<h2>2.2beta1 (2008-12-12)<a class="headerlink" href="#beta1-2008-12-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id197">
<h3>Features added<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow <code class="docutils literal"><span class="pre">lxml.html.diff.htmldiff</span></code> to accept Element objects, not
just HTML strings.</li>
</ul>
</div>
<div class="section" id="id198">
<h3>Bugs fixed<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when using an XPath evaluator in multiple threads.</li>
<li>Fixed missing whitespace before <code class="docutils literal"><span class="pre">Link:...</span></code> in <code class="docutils literal"><span class="pre">lxml.html.diff</span></code>.</li>
</ul>
</div>
<div class="section" id="id199">
<h3>Other changes<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Export <code class="docutils literal"><span class="pre">lxml.html.parse</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="id200">
<h2>2.1.4 (2008-12-12)<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id201">
<h3>Bugs fixed<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when using an XPath evaluator in multiple threads.</li>
</ul>
</div>
</div>
<div class="section" id="id202">
<h2>2.0.11 (2008-12-12)<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id203">
<h3>Bugs fixed<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when using an XPath evaluator in multiple threads.</li>
</ul>
</div>
</div>
<div class="section" id="alpha1-2008-11-23">
<h2>2.2alpha1 (2008-11-23)<a class="headerlink" href="#alpha1-2008-11-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id204">
<h3>Features added<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for XSLT result tree fragments in XPath/XSLT extension
functions.</li>
<li>QName objects have new properties <code class="docutils literal"><span class="pre">namespace</span></code> and <code class="docutils literal"><span class="pre">localname</span></code>.</li>
<li>New options for exclusive C14N and C14N without comments.</li>
<li>Instantiating a custom Element classes creates a new Element.</li>
</ul>
</div>
<div class="section" id="id205">
<h3>Bugs fixed<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>XSLT didn&#8217;t inherit the parse options of the input document.</li>
<li>0-bytes could slip through the API when used inside of Unicode
strings.</li>
<li>With <code class="docutils literal"><span class="pre">lxml.html.clean.autolink</span></code>, links with balanced parenthesis,
that end in a parenthesis, will be linked in their entirety (typical
with Wikipedia links).</li>
</ul>
</div>
<div class="section" id="id206">
<h3>Other changes<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id207">
<h2>2.1.3 (2008-11-17)<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id208">
<h3>Features added<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id209">
<h3>Bugs fixed<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ref-count leaks when lxml enters a try-except statement while an
outside exception lives in sys.exc_*(). This was due to a problem in
Cython, not lxml itself.</li>
<li>Parser Unicode decoding errors could get swallowed by other
exceptions.</li>
<li>Name/import errors in some Python modules.</li>
<li>Internal DTD subsets that did not specify a system or public ID were
not serialised and did not appear in the docinfo property of
ElementTrees.</li>
<li>Fix a pre-Py3k warning when parsing from a gzip file in Py2.6.</li>
<li>Test suite fixes for libxml2 2.7.</li>
<li>Resolver.resolve_string() did not work for non-ASCII byte strings.</li>
<li>Resolver.resolve_file() was broken.</li>
<li>Overriding the parser encoding didn&#8217;t work for many encodings.</li>
</ul>
</div>
<div class="section" id="id210">
<h3>Other changes<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id211">
<h2>2.0.10 (2008-11-17)<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id212">
<h3>Bugs fixed<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ref-count leaks when lxml enters a try-except statement while an
outside exception lives in sys.exc_*(). This was due to a problem in
Cython, not lxml itself.</li>
</ul>
</div>
</div>
<div class="section" id="id213">
<h2>2.1.2 (2008-09-05)<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id214">
<h3>Features added<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml.etree now tries to find the absolute path name of files when
parsing from a file-like object.  This helps custom resolvers when
resolving relative URLs, as lixbml2 can prepend them with the path
of the source document.</li>
</ul>
</div>
<div class="section" id="id215">
<h3>Bugs fixed<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory problem when passing documents between threads.</li>
<li>Target parser did not honour the <code class="docutils literal"><span class="pre">recover</span></code> option and raised an
exception instead of calling <code class="docutils literal"><span class="pre">.close()</span></code> on the target.</li>
</ul>
</div>
<div class="section" id="id216">
<h3>Other changes<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id217">
<h2>2.0.9 (2008-09-05)<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id218">
<h3>Bugs fixed<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory problem when passing documents between threads.</li>
<li>Target parser did not honour the <code class="docutils literal"><span class="pre">recover</span></code> option and raised an
exception instead of calling <code class="docutils literal"><span class="pre">.close()</span></code> on the target.</li>
</ul>
</div>
</div>
<div class="section" id="id219">
<h2>2.1.1 (2008-07-24)<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id220">
<h3>Features added<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id221">
<h3>Bugs fixed<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when parsing XSLT stylesheets in a thread and using them in
another.</li>
<li>Encoding problem when including text with ElementInclude under
Python 3.</li>
</ul>
</div>
<div class="section" id="id222">
<h3>Other changes<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id223">
<h2>2.0.8 (2008-07-24)<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id224">
<h3>Features added<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.html.rewrite_links()</span></code> strips links to work around documents
with whitespace in URL attributes.</li>
</ul>
</div>
<div class="section" id="id225">
<h3>Bugs fixed<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when parsing XSLT stylesheets in a thread and using them in
another.</li>
<li>CSS selector parser dropped remaining expression after a function
with parameters.</li>
</ul>
</div>
<div class="section" id="id226">
<h3>Other changes<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id227">
<h2>2.1 (2008-07-09)<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id228">
<h3>Features added<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Smart strings can be switched off in XPath (<code class="docutils literal"><span class="pre">smart_strings</span></code>
keyword option).</li>
<li><code class="docutils literal"><span class="pre">lxml.html.rewrite_links()</span></code> strips links to work around documents
with whitespace in URL attributes.</li>
</ul>
</div>
<div class="section" id="id229">
<h3>Bugs fixed<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Custom resolvers were not used for XMLSchema includes/imports and
XInclude processing.</li>
<li>CSS selector parser dropped remaining expression after a function
with parameters.</li>
</ul>
</div>
<div class="section" id="id230">
<h3>Other changes<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">objectify.enableRecursiveStr()</span></code> was removed, use
<code class="docutils literal"><span class="pre">objectify.enable_recursive_str()</span></code> instead</li>
<li>Speed-up when running XSLTs on documents from other threads</li>
</ul>
</div>
</div>
<div class="section" id="id231">
<h2>2.0.7 (2008-06-20)<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id232">
<h3>Features added<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pickling <code class="docutils literal"><span class="pre">ElementTree</span></code> objects in lxml.objectify.</li>
</ul>
</div>
<div class="section" id="id233">
<h3>Bugs fixed<a class="headerlink" href="#id233" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Descending dot-separated classes in CSS selectors were not resolved
correctly.</li>
<li><code class="docutils literal"><span class="pre">ElementTree.parse()</span></code> didn&#8217;t handle target parser result.</li>
<li>Potential threading problem in XInclude.</li>
<li>Crash in Element class lookup classes when the __init__() method of
the super class is not called from Python subclasses.</li>
</ul>
</div>
<div class="section" id="id234">
<h3>Other changes<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Non-ASCII characters in attribute values are no longer escaped on
serialisation.</li>
</ul>
</div>
</div>
<div class="section" id="beta3-2008-06-19">
<h2>2.1beta3 (2008-06-19)<a class="headerlink" href="#beta3-2008-06-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id235">
<h3>Features added<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Major overhaul of <code class="docutils literal"><span class="pre">tools/xpathgrep.py</span></code> script.</li>
<li>Pickling <code class="docutils literal"><span class="pre">ElementTree</span></code> objects in lxml.objectify.</li>
<li>Support for parsing from file-like objects that return unicode
strings.</li>
<li>New function <code class="docutils literal"><span class="pre">etree.cleanup_namespaces(el)</span></code> that removes unused
namespace declarations from a (sub)tree (experimental).</li>
<li>XSLT results support the buffer protocol in Python 3.</li>
<li>Polymorphic functions in <code class="docutils literal"><span class="pre">lxml.html</span></code> that accept either a tree or
a parsable string will return either a UTF-8 encoded byte string, a
unicode string or a tree, based on the type of the input.
Previously, the result was always a byte string or a tree.</li>
<li>Support for Python 2.6 and 3.0 beta.</li>
<li>File name handling now uses a heuristic to convert between byte
strings (usually filenames) and unicode strings (usually URLs).</li>
<li>Parsing from a plain file object frees the GIL under Python 2.x.</li>
<li>Running <code class="docutils literal"><span class="pre">iterparse()</span></code> on a plain file (or filename) frees the GIL
on reading under Python 2.x.</li>
<li>Conversion functions <code class="docutils literal"><span class="pre">html_to_xhtml()</span></code> and <code class="docutils literal"><span class="pre">xhtml_to_html()</span></code> in
lxml.html (experimental).</li>
<li>Most features in lxml.html work for XHTML namespaced tag names
(experimental).</li>
</ul>
</div>
<div class="section" id="id236">
<h3>Bugs fixed<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ElementTree.parse()</span></code> didn&#8217;t handle target parser result.</li>
<li>Crash in Element class lookup classes when the __init__() method of
the super class is not called from Python subclasses.</li>
<li>A number of problems related to unicode/byte string conversion of
filenames and error messages were fixed.</li>
<li>Building on MacOS-X now passes the &#8220;flat_namespace&#8221; option to the C
compiler, which reportedly prevents build quirks and crashes on this
platform.</li>
<li>Windows build was broken.</li>
<li>Rare crash when serialising to a file object with certain encodings.</li>
</ul>
</div>
<div class="section" id="id237">
<h3>Other changes<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Non-ASCII characters in attribute values are no longer escaped on
serialisation.</li>
<li>Passing non-ASCII byte strings or invalid unicode strings as .tag,
namespaces, etc. will result in a ValueError instead of an
AssertionError (just like the tag well-formedness check).</li>
<li>Up to several times faster attribute access (i.e. tree traversal) in
lxml.objectify.</li>
</ul>
</div>
</div>
<div class="section" id="id238">
<h2>2.0.6 (2008-05-31)<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id239">
<h3>Features added<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id240">
<h3>Bugs fixed<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Incorrect evaluation of <code class="docutils literal"><span class="pre">el.find(&quot;tag[child]&quot;)</span></code>.</li>
<li>Windows build was broken.</li>
<li>Moving a subtree from a document created in one thread into a
document of another thread could crash when the rest of the source
document is deleted while the subtree is still in use.</li>
<li>Rare crash when serialising to a file object with certain encodings.</li>
</ul>
</div>
<div class="section" id="id241">
<h3>Other changes<a class="headerlink" href="#id241" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml should now build without problems on MacOS-X.</li>
</ul>
</div>
</div>
<div class="section" id="beta2-2008-05-02">
<h2>2.1beta2 (2008-05-02)<a class="headerlink" href="#beta2-2008-05-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id242">
<h3>Features added<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All parse functions in lxml.html take a <code class="docutils literal"><span class="pre">parser</span></code> keyword argument.</li>
<li>lxml.html has a new parser class <code class="docutils literal"><span class="pre">XHTMLParser</span></code> and a module
attribute <code class="docutils literal"><span class="pre">xhtml_parser</span></code> that provide XML parsers that are
pre-configured for the lxml.html package.</li>
</ul>
</div>
<div class="section" id="id243">
<h3>Bugs fixed<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Moving a subtree from a document created in one thread into a
document of another thread could crash when the rest of the source
document is deleted while the subtree is still in use.</li>
<li>Passing an nsmap when creating an Element will no longer strip
redundantly defined namespace URIs.  This prevented the definition
of more than one prefix for a namespace on the same Element.</li>
</ul>
</div>
<div class="section" id="id244">
<h3>Other changes<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If the default namespace is redundantly defined with a prefix on the
same Element, the prefix will now be preferred for subelements and
attributes.  This allows users to work around a problem in libxml2
where attributes from the default namespace could serialise without
a prefix even when they appear on an Element with a different
namespace (i.e. they would end up in the wrong namespace).</li>
</ul>
</div>
</div>
<div class="section" id="id245">
<h2>2.0.5 (2008-05-01)<a class="headerlink" href="#id245" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id246">
<h3>Features added<a class="headerlink" href="#id246" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id247">
<h3>Bugs fixed<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Resolving to a filename in custom resolvers didn&#8217;t work.</li>
<li>lxml did not honour libxslt&#8217;s second error state &#8220;STOPPED&#8221;, which
let some XSLT errors pass silently.</li>
<li>Memory leak in Schematron with libxml2 &gt;= 2.6.31.</li>
</ul>
</div>
<div class="section" id="id248">
<h3>Other changes<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="beta1-2008-04-15">
<h2>2.1beta1 (2008-04-15)<a class="headerlink" href="#beta1-2008-04-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id249">
<h3>Features added<a class="headerlink" href="#id249" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Error logging in Schematron (requires libxml2 2.6.32 or later).</li>
<li>Parser option <code class="docutils literal"><span class="pre">strip_cdata</span></code> for normalising or keeping CDATA
sections.  Defaults to <code class="docutils literal"><span class="pre">True</span></code> as before, thus replacing CDATA
sections by their text content.</li>
<li><code class="docutils literal"><span class="pre">CDATA()</span></code> factory to wrap string content as CDATA section.</li>
</ul>
</div>
<div class="section" id="id250">
<h3>Bugs fixed<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Resolving to a filename in custom resolvers didn&#8217;t work.</li>
<li>lxml did not honour libxslt&#8217;s second error state &#8220;STOPPED&#8221;, which
let some XSLT errors pass silently.</li>
<li>Memory leak in Schematron with libxml2 &gt;= 2.6.31.</li>
<li>lxml.etree accepted non well-formed namespace prefix names.</li>
</ul>
</div>
<div class="section" id="id251">
<h3>Other changes<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Major cleanup in internal <code class="docutils literal"><span class="pre">moveNodeToDocument()</span></code> function, which
takes care of namespace cleanup when moving elements between
different namespace contexts.</li>
<li>New Elements created through the <code class="docutils literal"><span class="pre">makeelement()</span></code> method of an HTML
parser or through lxml.html now end up in a new HTML document
(doctype HTML 4.01 Transitional) instead of a generic XML document.
This mostly impacts the serialisation and the availability of a DTD
context.</li>
</ul>
</div>
</div>
<div class="section" id="id252">
<h2>2.0.4 (2008-04-13)<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id253">
<h3>Features added<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id254">
<h3>Bugs fixed<a class="headerlink" href="#id254" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Hanging thread in conjunction with GTK threading.</li>
<li>Crash bug in iterparse when moving elements into other documents.</li>
<li>HTML elements&#8217; <code class="docutils literal"><span class="pre">.cssselect()</span></code> method was broken.</li>
<li><code class="docutils literal"><span class="pre">ElementTree.find*()</span></code> didn&#8217;t accept QName objects.</li>
</ul>
</div>
<div class="section" id="id255">
<h3>Other changes<a class="headerlink" href="#id255" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="alpha1-2008-03-27">
<h2>2.1alpha1 (2008-03-27)<a class="headerlink" href="#alpha1-2008-03-27" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id256">
<h3>Features added<a class="headerlink" href="#id256" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New event types &#8216;comment&#8217; and &#8216;pi&#8217; in <code class="docutils literal"><span class="pre">iterparse()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">XSLTAccessControl</span></code> instances have a property <code class="docutils literal"><span class="pre">options</span></code> that
returns a dict of access configuration options.</li>
<li>Constant instances <code class="docutils literal"><span class="pre">DENY_ALL</span></code> and <code class="docutils literal"><span class="pre">DENY_WRITE</span></code> on
<code class="docutils literal"><span class="pre">XSLTAccessControl</span></code> class.</li>
<li>Extension elements for XSLT (experimental!)</li>
<li><code class="docutils literal"><span class="pre">Element.base</span></code> property returns the xml:base or HTML base URL of
an Element.</li>
<li><code class="docutils literal"><span class="pre">docinfo.URL</span></code> property is writable.</li>
</ul>
</div>
<div class="section" id="id257">
<h3>Bugs fixed<a class="headerlink" href="#id257" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Default encoding for plain text serialisation was different from
that of XML serialisation (UTF-8 instead of ASCII).</li>
</ul>
</div>
<div class="section" id="id258">
<h3>Other changes<a class="headerlink" href="#id258" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Minor API speed-ups.</li>
<li>The benchmark suite now uses tail text in the trees, which makes the
absolute numbers incomparable to previous results.</li>
<li>Generating the HTML documentation now requires <a class="reference external" href="http://pygments.org/">Pygments</a>, which is
used to enable syntax highlighting for the doctest examples.</li>
</ul>
<p>Most long-time deprecated functions and methods were removed:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.clearErrorLog()</span></code>, use <code class="docutils literal"><span class="pre">etree.clear_error_log()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.useGlobalPythonLog()</span></code>, use
<code class="docutils literal"><span class="pre">etree.use_global_python_log()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.ElementClassLookup.setFallback()</span></code>, use
<code class="docutils literal"><span class="pre">etree.ElementClassLookup.set_fallback()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.getDefaultParser()</span></code>, use <code class="docutils literal"><span class="pre">etree.get_default_parser()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.setDefaultParser()</span></code>, use <code class="docutils literal"><span class="pre">etree.set_default_parser()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">etree.setElementClassLookup()</span></code>, use
<code class="docutils literal"><span class="pre">etree.set_element_class_lookup()</span></code></p>
<p>Note that <code class="docutils literal"><span class="pre">parser.setElementClassLookup()</span></code> has not been removed
yet, although <code class="docutils literal"><span class="pre">parser.set_element_class_lookup()</span></code> should be used
instead.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">xpath_evaluator.registerNamespace()</span></code>, use
<code class="docutils literal"><span class="pre">xpath_evaluator.register_namespace()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">xpath_evaluator.registerNamespaces()</span></code>, use
<code class="docutils literal"><span class="pre">xpath_evaluator.register_namespaces()</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">objectify.setPytypeAttributeTag</span></code>, use
<code class="docutils literal"><span class="pre">objectify.set_pytype_attribute_tag</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">objectify.setDefaultParser()</span></code>, use
<code class="docutils literal"><span class="pre">objectify.set_default_parser()</span></code></p>
</li>
</ul>
</div>
</div>
<div class="section" id="id259">
<h2>2.0.3 (2008-03-26)<a class="headerlink" href="#id259" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id260">
<h3>Features added<a class="headerlink" href="#id260" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>soupparser.parse() allows passing keyword arguments on to
BeautifulSoup.</li>
<li><code class="docutils literal"><span class="pre">fromstring()</span></code> method in <code class="docutils literal"><span class="pre">lxml.html.soupparser</span></code>.</li>
</ul>
</div>
<div class="section" id="id261">
<h3>Bugs fixed<a class="headerlink" href="#id261" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.html.diff</span></code> didn&#8217;t treat empty tags properly (e.g.,
<code class="docutils literal"><span class="pre">&lt;br&gt;</span></code>).</li>
<li>Handle entity replacements correctly in target parser.</li>
<li>Crash when using <code class="docutils literal"><span class="pre">iterparse()</span></code> with XML Schema validation.</li>
<li>The BeautifulSoup parser (soupparser.py) did not replace entities,
which made them turn up in text content.</li>
<li>Attribute assignment of custom PyTypes in objectify could fail to
correctly serialise the value to a string.</li>
</ul>
</div>
<div class="section" id="id262">
<h3>Other changes<a class="headerlink" href="#id262" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lxml.html.ElementSoup</span></code> was replaced by a new module
<code class="docutils literal"><span class="pre">lxml.html.soupparser</span></code> with a more consistent API.  The old module
remains for compatibility with ElementTree&#8217;s own ElementSoup module.</li>
<li>Setting the XSLT_CONFIG and XML2_CONFIG environment variables at
build time will let setup.py pick up the <code class="docutils literal"><span class="pre">xml2-config</span></code> and
<code class="docutils literal"><span class="pre">xslt-config</span></code> scripts from the supplied path name.</li>
<li>Passing <code class="docutils literal"><span class="pre">--with-xml2-config=/path/to/xml2-config</span></code> to setup.py will
override the <code class="docutils literal"><span class="pre">xml2-config</span></code> script that is used to determine the C
compiler options.  The same applies for the <code class="docutils literal"><span class="pre">--with-xslt-config</span></code>
option.</li>
</ul>
</div>
</div>
<div class="section" id="id263">
<h2>2.0.2 (2008-02-22)<a class="headerlink" href="#id263" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id264">
<h3>Features added<a class="headerlink" href="#id264" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support passing <code class="docutils literal"><span class="pre">base_url</span></code> to file parser functions to override
the filename of the file(-like) object.</li>
</ul>
</div>
<div class="section" id="id265">
<h3>Bugs fixed<a class="headerlink" href="#id265" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The prefix for objectify&#8217;s pytype namespace was missing from the set
of default prefixes.</li>
<li>Memory leak in Schematron (fixed only for libxml2 2.6.31+).</li>
<li>Error type names in RelaxNG were reported incorrectly.</li>
<li>Slice deletion bug fixed in objectify.</li>
</ul>
</div>
<div class="section" id="id266">
<h3>Other changes<a class="headerlink" href="#id266" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Enabled doctests for some Python modules (especially <code class="docutils literal"><span class="pre">lxml.html</span></code>).</li>
<li>Add a <code class="docutils literal"><span class="pre">method</span></code> argument to <code class="docutils literal"><span class="pre">lxml.html.tostring()</span></code>
(<code class="docutils literal"><span class="pre">method=&quot;xml&quot;</span></code> for XHTML output).</li>
<li>Make it clearer that methods like <code class="docutils literal"><span class="pre">lxml.html.fromstring()</span></code> take a
<code class="docutils literal"><span class="pre">base_url</span></code> argument.</li>
</ul>
</div>
</div>
<div class="section" id="id267">
<h2>2.0.1 (2008-02-13)<a class="headerlink" href="#id267" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id268">
<h3>Features added<a class="headerlink" href="#id268" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Child iteration in <code class="docutils literal"><span class="pre">lxml.pyclasslookup</span></code>.</li>
<li>Loads of new docstrings reflect the signature of functions and
methods to make them visible in API docs and <code class="docutils literal"><span class="pre">help()</span></code></li>
</ul>
</div>
<div class="section" id="id269">
<h3>Bugs fixed<a class="headerlink" href="#id269" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The module <code class="docutils literal"><span class="pre">lxml.html.builder</span></code> was duplicated as
<code class="docutils literal"><span class="pre">lxml.htmlbuilder</span></code></li>
<li>Form elements would return None for <code class="docutils literal"><span class="pre">form.fields.keys()</span></code> if there
was an unnamed input field.  Now unnamed input fields are completely
ignored.</li>
<li>Setting an element slice in objectify could insert slice-overlapping
elements at the wrong position.</li>
</ul>
</div>
<div class="section" id="id270">
<h3>Other changes<a class="headerlink" href="#id270" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The generated API documentation was cleaned up and disburdened from
non-public classes etc.</li>
<li>The previously public module <code class="docutils literal"><span class="pre">lxml.html.setmixin</span></code> was renamed to
<code class="docutils literal"><span class="pre">lxml.html._setmixin</span></code> as it is not an official part of lxml.  If
you want to use it, feel free to copy it over to your own source
base.</li>
<li>Passing <code class="docutils literal"><span class="pre">--with-xslt-config=/path/to/xslt-config</span></code> to setup.py will
override the <code class="docutils literal"><span class="pre">xslt-config</span></code> script that is used to determine the C
compiler options.</li>
</ul>
</div>
</div>
<div class="section" id="id271">
<h2>2.0 (2008-02-01)<a class="headerlink" href="#id271" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id272">
<h3>Features added<a class="headerlink" href="#id272" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Passing the <code class="docutils literal"><span class="pre">unicode</span></code> type as <code class="docutils literal"><span class="pre">encoding</span></code> to <code class="docutils literal"><span class="pre">tostring()</span></code> will
serialise to unicode.  The <code class="docutils literal"><span class="pre">tounicode()</span></code> function is now
deprecated.</li>
<li><code class="docutils literal"><span class="pre">XMLSchema()</span></code> and <code class="docutils literal"><span class="pre">RelaxNG()</span></code> can parse from StringIO.</li>
<li><code class="docutils literal"><span class="pre">makeparser()</span></code> function in <code class="docutils literal"><span class="pre">lxml.objectify</span></code> to create a new
parser with the usual objectify setup.</li>
<li>Plain ASCII XPath string results are no longer forced into unicode
objects as in 2.0beta1, but are returned as plain strings as before.</li>
<li>All XPath string results are &#8216;smart&#8217; objects that have a
<code class="docutils literal"><span class="pre">getparent()</span></code> method to retrieve their parent Element.</li>
<li><code class="docutils literal"><span class="pre">with_tail</span></code> option in serialiser functions.</li>
<li>More accurate exception messages in validator creation.</li>
<li>Parse-time XML schema validation (<code class="docutils literal"><span class="pre">schema</span></code> parser keyword).</li>
<li>XPath string results of the <code class="docutils literal"><span class="pre">text()</span></code> function and attribute
selection make their Element container accessible through a
<code class="docutils literal"><span class="pre">getparent()</span></code> method.  As a side-effect, they are now always
unicode objects (even ASCII strings).</li>
<li><code class="docutils literal"><span class="pre">XSLT</span></code> objects are usable in any thread - at the cost of a deep
copy if they were not created in that thread.</li>
<li>Invalid entity names and character references will be rejected by
the <code class="docutils literal"><span class="pre">Entity()</span></code> factory.</li>
<li><code class="docutils literal"><span class="pre">entity.text</span></code> returns the textual representation of the entity,
e.g. <code class="docutils literal"><span class="pre">&amp;amp;</span></code>.</li>
<li>New properties <code class="docutils literal"><span class="pre">position</span></code> and <code class="docutils literal"><span class="pre">code</span></code> on ParseError exception (as
in ET 1.3)</li>
<li>Rich comparison of <code class="docutils literal"><span class="pre">element.attrib</span></code> proxies.</li>
<li>ElementTree compatible TreeBuilder class.</li>
<li>Use default prefixes for some common XML namespaces.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.clean.Cleaner</span></code> now allows for a <code class="docutils literal"><span class="pre">host_whitelist</span></code>, and
two overridable methods: <code class="docutils literal"><span class="pre">allow_embedded_url(el,</span> <span class="pre">url)</span></code> and the
more general <code class="docutils literal"><span class="pre">allow_element(el)</span></code>.</li>
<li>Extended slicing of Elements as in <code class="docutils literal"><span class="pre">element[1:-1:2]</span></code>, both in
etree and in objectify</li>
<li>Resolvers can now provide a <code class="docutils literal"><span class="pre">base_url</span></code> keyword argument when
resolving a document as string data.</li>
<li>When using <code class="docutils literal"><span class="pre">lxml.doctestcompare</span></code> you can give the doctest option
<code class="docutils literal"><span class="pre">NOPARSE_MARKUP</span></code> (like <code class="docutils literal"><span class="pre">#</span> <span class="pre">doctest:</span> <span class="pre">+NOPARSE_MARKUP</span></code>) to suppress
the special checking for one test.</li>
<li>Separate <code class="docutils literal"><span class="pre">feed_error_log</span></code> property for the feed parser interface.
The normal parser interface and <code class="docutils literal"><span class="pre">iterparse</span></code> continue to use
<code class="docutils literal"><span class="pre">error_log</span></code>.</li>
<li>The normal parsers and the feed parser interface are now separated
and can be used concurrently on the same parser instance.</li>
<li><code class="docutils literal"><span class="pre">fromstringlist()</span></code> and <code class="docutils literal"><span class="pre">tostringlist()</span></code> functions as in
ElementTree 1.3</li>
<li><code class="docutils literal"><span class="pre">iterparse()</span></code> accepts an <code class="docutils literal"><span class="pre">html</span></code> boolean keyword argument for
parsing with the HTML parser (note that this interface may be
subject to change)</li>
<li>Parsers accept an <code class="docutils literal"><span class="pre">encoding</span></code> keyword argument that overrides the encoding
of the parsed documents.</li>
<li>New C-API function <code class="docutils literal"><span class="pre">hasChild()</span></code> to test for children</li>
<li><code class="docutils literal"><span class="pre">annotate()</span></code> function in objectify can annotate with Python types and XSI
types in one step.  Accompanied by <code class="docutils literal"><span class="pre">xsiannotate()</span></code> and <code class="docutils literal"><span class="pre">pyannotate()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">ET.write()</span></code>, <code class="docutils literal"><span class="pre">tostring()</span></code> and <code class="docutils literal"><span class="pre">tounicode()</span></code> now accept a keyword
argument <code class="docutils literal"><span class="pre">method</span></code> that can be one of &#8216;xml&#8217; (or None), &#8216;html&#8217; or &#8216;text&#8217; to
serialise as XML, HTML or plain text content.</li>
<li><code class="docutils literal"><span class="pre">iterfind()</span></code> method on Elements returns an iterator equivalent to
<code class="docutils literal"><span class="pre">findall()</span></code></li>
<li><code class="docutils literal"><span class="pre">itertext()</span></code> method on Elements</li>
<li>Setting a QName object as value of the .text property or as an attribute
will resolve its prefix in the respective context</li>
<li>ElementTree-like parser target interface as described in
<a class="reference external" href="http://effbot.org/elementtree/elementtree-xmlparser.htm">http://effbot.org/elementtree/elementtree-xmlparser.htm</a></li>
<li>ElementTree-like feed parser interface on XMLParser and HTMLParser
(<code class="docutils literal"><span class="pre">feed()</span></code> and <code class="docutils literal"><span class="pre">close()</span></code> methods)</li>
<li>Reimplemented <code class="docutils literal"><span class="pre">objectify.E</span></code> for better performance and improved
integration with objectify.  Provides extended type support based on
registered PyTypes.</li>
<li>XSLT objects now support deep copying</li>
<li>New <code class="docutils literal"><span class="pre">makeSubElement()</span></code> C-API function that allows creating a new
subelement straight with text, tail and attributes.</li>
<li>XPath extension functions can now access the current context node
(<code class="docutils literal"><span class="pre">context.context_node</span></code>) and use a context dictionary
(<code class="docutils literal"><span class="pre">context.eval_context</span></code>) from the context provided in their first
parameter</li>
<li>HTML tag soup parser based on BeautifulSoup in <code class="docutils literal"><span class="pre">lxml.html.ElementSoup</span></code></li>
<li>New module <code class="docutils literal"><span class="pre">lxml.doctestcompare</span></code> by Ian Bicking for writing simplified
doctests based on XML/HTML output.  Use by importing <code class="docutils literal"><span class="pre">lxml.usedoctest</span></code> or
<code class="docutils literal"><span class="pre">lxml.html.usedoctest</span></code> from within a doctest.</li>
<li>New module <code class="docutils literal"><span class="pre">lxml.cssselect</span></code> by Ian Bicking for selecting Elements with CSS
selectors.</li>
<li>New package <code class="docutils literal"><span class="pre">lxml.html</span></code> written by Ian Bicking for advanced HTML
treatment.</li>
<li>Namespace class setup is now local to the <code class="docutils literal"><span class="pre">ElementNamespaceClassLookup</span></code>
instance and no longer global.</li>
<li>Schematron validation (incomplete in libxml2)</li>
<li>Additional <code class="docutils literal"><span class="pre">stringify</span></code> argument to <code class="docutils literal"><span class="pre">objectify.PyType()</span></code> takes a
conversion function to strings to support setting text values from arbitrary
types.</li>
<li>Entity support through an <code class="docutils literal"><span class="pre">Entity</span></code> factory and element classes.  XML
parsers now have a <code class="docutils literal"><span class="pre">resolve_entities</span></code> keyword argument that can be set to
False to keep entities in the document.</li>
<li><code class="docutils literal"><span class="pre">column</span></code> field on error log entries to accompany the <code class="docutils literal"><span class="pre">line</span></code> field</li>
<li>Error specific messages in XPath parsing and evaluation
NOTE: for evaluation errors, you will now get an XPathEvalError instead of
an XPathSyntaxError.  To catch both, you can except on <code class="docutils literal"><span class="pre">XPathError</span></code></li>
<li>The regular expression functions in XPath now support passing a node-set
instead of a string</li>
<li>Extended type annotation in objectify: new <code class="docutils literal"><span class="pre">xsiannotate()</span></code> function</li>
<li>EXSLT RegExp support in standard XPath (not only XSLT)</li>
</ul>
</div>
<div class="section" id="id273">
<h3>Bugs fixed<a class="headerlink" href="#id273" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Missing import in <code class="docutils literal"><span class="pre">lxml.html.clean</span></code>.</li>
<li>Some Python 2.4-isms prevented lxml from building/running under
Python 2.3.</li>
<li>XPath on ElementTrees could crash when selecting the virtual root
node of the ElementTree.</li>
<li>Compilation <code class="docutils literal"><span class="pre">--without-threading</span></code> was buggy in alpha5/6.</li>
<li>Memory leak in the <code class="docutils literal"><span class="pre">parse()</span></code> function.</li>
<li>Minor bugs in XSLT error message formatting.</li>
<li>Result document memory leak in target parser.</li>
<li>Target parser failed to report comments.</li>
<li>In the <code class="docutils literal"><span class="pre">lxml.html</span></code> <code class="docutils literal"><span class="pre">iter_links</span></code> method, links in <code class="docutils literal"><span class="pre">&lt;object&gt;</span></code>
tags weren&#8217;t recognized.  (Note: plugin-specific link parameters
still aren&#8217;t recognized.)  Also, the <code class="docutils literal"><span class="pre">&lt;embed&gt;</span></code> tag, though not
standard, is now included in <code class="docutils literal"><span class="pre">lxml.html.defs.special_inline_tags</span></code>.</li>
<li>Using custom resolvers on XSLT stylesheets parsed from a string
could request ill-formed URLs.</li>
<li>With <code class="docutils literal"><span class="pre">lxml.doctestcompare</span></code> if you do <code class="docutils literal"><span class="pre">&lt;tag</span> <span class="pre">xmlns=&quot;...&quot;&gt;</span></code> in your
output, it will then be namespace-neutral (before the ellipsis was
treated as a real namespace).</li>
<li>AttributeError in feed parser on parse errors</li>
<li>XML feed parser setup problem</li>
<li>Type annotation for unicode strings in <code class="docutils literal"><span class="pre">DataElement()</span></code></li>
<li>lxml failed to serialise namespace declarations of elements other than the
root node of a tree</li>
<li>Race condition in XSLT where the resolver context leaked between concurrent
XSLT calls</li>
<li>lxml.etree did not check tag/attribute names</li>
<li>The XML parser did not report undefined entities as error</li>
<li>The text in exceptions raised by XML parsers, validators and XPath
evaluators now reports the first error that occurred instead of the last</li>
<li>Passing &#8216;&#8217; as XPath namespace prefix did not raise an error</li>
<li>Thread safety in XPath evaluators</li>
</ul>
</div>
<div class="section" id="id274">
<h3>Other changes<a class="headerlink" href="#id274" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Exceptions carry only the part of the error log that is related to
the operation that caused the error.</li>
<li><code class="docutils literal"><span class="pre">XMLSchema()</span></code> and <code class="docutils literal"><span class="pre">RelaxNG()</span></code> now enforce passing the source
file/filename through the <code class="docutils literal"><span class="pre">file</span></code> keyword argument.</li>
<li>The test suite now skips most doctests under Python 2.3.</li>
<li><code class="docutils literal"><span class="pre">make</span> <span class="pre">clean</span></code> no longer removes the .c files (use <code class="docutils literal"><span class="pre">make</span>
<span class="pre">realclean</span></code> instead)</li>
<li>Minor performance tweaks for Element instantiation and subelement
creation</li>
<li>Various places in the XPath, XSLT and iteration APIs now require
keyword-only arguments.</li>
<li>The argument order in <code class="docutils literal"><span class="pre">element.itersiblings()</span></code> was changed to
match the order used in all other iteration methods.  The second
argument (&#8216;preceding&#8217;) is now a keyword-only argument.</li>
<li>The <code class="docutils literal"><span class="pre">getiterator()</span></code> method on Elements and ElementTrees was
reverted to return an iterator as it did in lxml 1.x.  The ET API
specification allows it to return either a sequence or an iterator,
and it traditionally returned a sequence in ET and an iterator in
lxml.  However, it is now deprecated in favour of the <code class="docutils literal"><span class="pre">iter()</span></code>
method, which should be used in new code wherever possible.</li>
<li>The &#8216;pretty printed&#8217; serialisation of ElementTree objects now
inserts newlines at the root level between processing instructions,
comments and the root tag.</li>
<li>A &#8216;pretty printed&#8217; serialisation is now terminated with a newline.</li>
<li>Second argument to <code class="docutils literal"><span class="pre">lxml.etree.Extension()</span></code> helper is no longer
required, third argument is now a keyword-only argument <code class="docutils literal"><span class="pre">ns</span></code>.</li>
<li><code class="docutils literal"><span class="pre">lxml.html.tostring</span></code> takes an <code class="docutils literal"><span class="pre">encoding</span></code> argument.</li>
<li>The module source files were renamed to &#8220;lxml.*.pyx&#8221;, such as
&#8220;lxml.etree.pyx&#8221;.  This was changed for consistency with the way
Pyrex commonly handles package imports.  The main effect is that
classes now know about their fully qualified class name, including
the package name of their module.</li>
<li>Keyword-only arguments in some API functions, especially in the
parsers and serialisers.</li>
<li>Tag name validation in lxml.etree (and lxml.html) now distinguishes
between HTML tags and XML tags based on the parser that was used to
parse or create them.  HTML tags no longer reject any non-ASCII
characters in tag names but only spaces and the special characters
<code class="docutils literal"><span class="pre">&lt;&gt;&amp;/&quot;'</span></code>.</li>
<li>lxml.etree now emits a warning if you use XPath with libxml2 2.6.27
(which can crash on certain XPath errors)</li>
<li>Type annotation in objectify now preserves the already annotated type by
default to prevent losing type information that is already there.</li>
<li><code class="docutils literal"><span class="pre">element.getiterator()</span></code> returns a list, use <code class="docutils literal"><span class="pre">element.iter()</span></code> to retrieve
an iterator (ElementTree 1.3 compatible behaviour)</li>
<li>objectify.PyType for None is now called &#8220;NoneType&#8221;</li>
<li><code class="docutils literal"><span class="pre">el.getiterator()</span></code> renamed to <code class="docutils literal"><span class="pre">el.iter()</span></code>, following ElementTree 1.3 -
original name is still available as alias</li>
<li>In the public C-API, <code class="docutils literal"><span class="pre">findOrBuildNodeNs()</span></code> was replaced by the more
generic <code class="docutils literal"><span class="pre">findOrBuildNodeNsPrefix</span></code></li>
<li>Major refactoring in XPath/XSLT extension function code</li>
<li>Network access in parsers disabled by default</li>
</ul>
</div>
</div>
<div class="section" id="id275">
<h2>1.3.6 (2007-10-29)<a class="headerlink" href="#id275" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id276">
<h3>Bugs fixed<a class="headerlink" href="#id276" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Backported decref crash fix from 2.0</li>
<li>Well hidden free-while-in-use crash bug in ObjectPath</li>
</ul>
</div>
<div class="section" id="id277">
<h3>Other changes<a class="headerlink" href="#id277" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The test suites now run <code class="docutils literal"><span class="pre">gc.collect()</span></code> in the <code class="docutils literal"><span class="pre">tearDown()</span></code>
methods.  While this makes them take a lot longer to run, it also
makes it easier to link a specific test to garbage collection
problems that would otherwise appear in later tests.</li>
</ul>
</div>
</div>
<div class="section" id="id278">
<h2>1.3.5 (2007-10-22)<a class="headerlink" href="#id278" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id279">
<h3>Features added<a class="headerlink" href="#id279" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id280">
<h3>Bugs fixed<a class="headerlink" href="#id280" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml.etree could crash when adding more than 10000 namespaces to a
document</li>
<li>lxml failed to serialise namespace declarations of elements other
than the root node of a tree</li>
</ul>
</div>
</div>
<div class="section" id="id281">
<h2>1.3.4 (2007-08-30)<a class="headerlink" href="#id281" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id282">
<h3>Features added<a class="headerlink" href="#id282" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">ElementMaker</span></code> in <code class="docutils literal"><span class="pre">lxml.builder</span></code> now accepts the keyword arguments
<code class="docutils literal"><span class="pre">namespace</span></code> and <code class="docutils literal"><span class="pre">nsmap</span></code> to set a namespace and nsmap for the Elements it
creates.</li>
<li>The <code class="docutils literal"><span class="pre">docinfo</span></code> on ElementTree objects has new properties <code class="docutils literal"><span class="pre">internalDTD</span></code>
and <code class="docutils literal"><span class="pre">externalDTD</span></code> that return a DTD object for the internal or external
subset of the document respectively.</li>
<li>Serialising an ElementTree now includes any internal DTD subsets that are
part of the document, as well as comments and PIs that are siblings of the
root node.</li>
</ul>
</div>
<div class="section" id="id283">
<h3>Bugs fixed<a class="headerlink" href="#id283" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Parsing with the <code class="docutils literal"><span class="pre">no_network</span></code> option could fail</li>
</ul>
</div>
<div class="section" id="id284">
<h3>Other changes<a class="headerlink" href="#id284" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml now raises a TagNameWarning about tag names containing &#8216;:&#8217; instead of
an Error as 1.3.3 did.  The reason is that a number of projects currently
misuse the previous lack of tag name validation to generate namespace
prefixes without declaring namespaces.  Apart from the danger of generating
broken XML this way, it also breaks most of the namespace-aware tools in
XML, including XPath, XSLT and validation.  lxml 1.3.x will continue to
support this bug with a Warning, while lxml 2.0 will be strict about
well-formed tag names (not only regarding &#8216;:&#8217;).</li>
<li>Serialising an Element no longer includes its comment and PI siblings (only
ElementTree serialisation includes them).</li>
</ul>
</div>
</div>
<div class="section" id="id285">
<h2>1.3.3 (2007-07-26)<a class="headerlink" href="#id285" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id286">
<h3>Features added<a class="headerlink" href="#id286" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>ElementTree compatible parser <code class="docutils literal"><span class="pre">ETCompatXMLParser</span></code> strips processing
instructions and comments while parsing XML</li>
<li>Parsers now support stripping PIs (keyword argument &#8216;remove_pis&#8217;)</li>
<li><code class="docutils literal"><span class="pre">etree.fromstring()</span></code> now supports parsing both HTML and XML, depending on
the parser you pass.</li>
<li>Support <code class="docutils literal"><span class="pre">base_url</span></code> keyword argument in <code class="docutils literal"><span class="pre">HTML()</span></code> and <code class="docutils literal"><span class="pre">XML()</span></code></li>
</ul>
</div>
<div class="section" id="id287">
<h3>Bugs fixed<a class="headerlink" href="#id287" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Parsing from Python Unicode strings failed on some platforms</li>
<li><code class="docutils literal"><span class="pre">Element()</span></code> did not raise an exception on tag names containing &#8216;:&#8217;</li>
<li><code class="docutils literal"><span class="pre">Element.getiterator(tag)</span></code> did not accept <code class="docutils literal"><span class="pre">Comment</span></code> and
<code class="docutils literal"><span class="pre">ProcessingInstruction</span></code> as tags. It also accepts <code class="docutils literal"><span class="pre">Element</span></code> now.</li>
</ul>
</div>
</div>
<div class="section" id="id288">
<h2>1.3.2 (2007-07-03)<a class="headerlink" href="#id288" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id289">
<h3>Features added<a class="headerlink" href="#id289" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id290">
<h3>Bugs fixed<a class="headerlink" href="#id290" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&#8220;deallocating None&#8221; crash bug</li>
</ul>
</div>
</div>
<div class="section" id="id291">
<h2>1.3.1 (2007-07-02)<a class="headerlink" href="#id291" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id292">
<h3>Features added<a class="headerlink" href="#id292" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>objectify.DataElement now supports setting values from existing data
elements (not just plain Python types) and reuses defined namespaces etc.</li>
<li>E-factory support for lxml.objectify (<code class="docutils literal"><span class="pre">objectify.E</span></code>)</li>
</ul>
</div>
<div class="section" id="id293">
<h3>Bugs fixed<a class="headerlink" href="#id293" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Better way to prevent crashes in Element proxy cleanup code</li>
<li>objectify.DataElement didn&#8217;t set up None value correctly</li>
<li>objectify.DataElement didn&#8217;t check the value against the provided type hints</li>
<li>Reference-counting bug in <code class="docutils literal"><span class="pre">Element.attrib.pop()</span></code></li>
</ul>
</div>
</div>
<div class="section" id="id294">
<h2>1.3 (2007-06-24)<a class="headerlink" href="#id294" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id295">
<h3>Features added<a class="headerlink" href="#id295" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Module <code class="docutils literal"><span class="pre">lxml.pyclasslookup</span></code> module implements an Element class lookup
scheme that can access the entire tree in read-only mode to help determining
a suitable Element class</li>
<li>Parsers take a <code class="docutils literal"><span class="pre">remove_comments</span></code> keyword argument that skips over comments</li>
<li><code class="docutils literal"><span class="pre">parse()</span></code> function in <code class="docutils literal"><span class="pre">objectify</span></code>, corresponding to <code class="docutils literal"><span class="pre">XML()</span></code> etc.</li>
<li><code class="docutils literal"><span class="pre">Element.addnext(el)</span></code> and <code class="docutils literal"><span class="pre">Element.addprevious(el)</span></code> methods to support
adding processing instructions and comments around the root node</li>
<li><code class="docutils literal"><span class="pre">Element.attrib</span></code> was missing <code class="docutils literal"><span class="pre">clear()</span></code> and <code class="docutils literal"><span class="pre">pop()</span></code> methods</li>
<li>Extended type annotation in objectify: cleaner annotation namespace setup
plus new <code class="docutils literal"><span class="pre">deannotate()</span></code> function</li>
<li>Support for custom Element class instantiation in lxml.sax: passing a
<code class="docutils literal"><span class="pre">makeelement</span></code> function to the ElementTreeContentHandler will reuse the
lookup context of that function</li>
<li>&#8216;.&#8217; represents empty ObjectPath (identity)</li>
<li><code class="docutils literal"><span class="pre">Element.values()</span></code> to accompany the existing <code class="docutils literal"><span class="pre">.keys()</span></code> and <code class="docutils literal"><span class="pre">.items()</span></code></li>
<li><code class="docutils literal"><span class="pre">collectAttributes()</span></code> C-function to build a list of attribute
keys/values/items for a libxml2 node</li>
<li><code class="docutils literal"><span class="pre">DTD</span></code> validator class (like <code class="docutils literal"><span class="pre">RelaxNG</span></code> and <code class="docutils literal"><span class="pre">XMLSchema</span></code>)</li>
<li>HTML generator helpers by Fredrik Lundh in <code class="docutils literal"><span class="pre">lxml.htmlbuilder</span></code></li>
<li><code class="docutils literal"><span class="pre">ElementMaker</span></code> XML generator by Fredrik Lundh in <code class="docutils literal"><span class="pre">lxml.builder.E</span></code></li>
<li>Support for pickeling <code class="docutils literal"><span class="pre">objectify.ObjectifiedElement</span></code> objects to XML</li>
<li><code class="docutils literal"><span class="pre">update()</span></code> method on Element.attrib</li>
<li>Optimised replacement for libxml2&#8217;s _xmlReconsiliateNs(). This allows lxml
a better handling of namespaces when moving elements between documents.</li>
</ul>
</div>
<div class="section" id="id296">
<h3>Bugs fixed<a class="headerlink" href="#id296" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removing Elements from a tree could make them lose their namespace
declarations</li>
<li><code class="docutils literal"><span class="pre">ElementInclude</span></code> didn&#8217;t honour base URL of original document</li>
<li>Replacing the children slice of an Element would cut off the tails of the
original children</li>
<li><code class="docutils literal"><span class="pre">Element.getiterator(tag)</span></code> did not accept <code class="docutils literal"><span class="pre">Comment</span></code> and
<code class="docutils literal"><span class="pre">ProcessingInstruction</span></code> as tags</li>
<li>API functions now check incoming strings for XML conformity.  Zero bytes or
low ASCII characters are no longer accepted (AssertionError).</li>
<li>XSLT parsing failed to pass resolver context on to imported documents</li>
<li>passing &#8216;&#8217; as namespace prefix in nsmap could be passed through to libxml2</li>
<li>Objectify couldn&#8217;t handle prefixed XSD type names in <code class="docutils literal"><span class="pre">xsi:type</span></code></li>
<li>More ET compatible behaviour when writing out XML declarations or not</li>
<li>More robust error handling in <code class="docutils literal"><span class="pre">iterparse()</span></code></li>
<li>Documents lost their top-level PIs and comments on serialisation</li>
<li>lxml.sax failed on comments and PIs. Comments are now properly ignored and
PIs are copied.</li>
<li>Possible memory leaks in namespace handling when moving elements between
documents</li>
</ul>
</div>
<div class="section" id="id297">
<h3>Other changes<a class="headerlink" href="#id297" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>major restructuring in the documentation</li>
</ul>
</div>
</div>
<div class="section" id="id298">
<h2>1.2.1 (2007-02-27)<a class="headerlink" href="#id298" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id299">
<h3>Bugs fixed<a class="headerlink" href="#id299" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Build fixes for MS compiler</li>
<li>Item assignments to special names like <code class="docutils literal"><span class="pre">element[&quot;text&quot;]</span></code> failed</li>
<li>Renamed ObjectifiedDataElement.__setText() to _setText() to make it easier
to access</li>
<li>The pattern for attribute names in ObjectPath was too restrictive</li>
</ul>
</div>
</div>
<div class="section" id="id300">
<h2>1.2 (2007-02-20)<a class="headerlink" href="#id300" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id301">
<h3>Features added<a class="headerlink" href="#id301" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rich comparison of QName objects</li>
<li>Support for regular expressions in benchmark selection</li>
<li>get/set emulation (not .attrib!) for attributes on processing instructions</li>
<li>ElementInclude Python module for ElementTree compatible XInclude processing
that honours custom resolvers registered with the source document</li>
<li>ElementTree.parser property holds the parser used to parse the document</li>
<li>setup.py has been refactored for greater readability and flexibility</li>
<li>&#8211;rpath flag to setup.py to induce automatic linking-in of dynamic library
runtime search paths has been renamed to &#8211;auto-rpath. This makes it
possible to pass an &#8211;rpath directly to distutils; previously this was being
shadowed.</li>
</ul>
</div>
<div class="section" id="id302">
<h3>Bugs fixed<a class="headerlink" href="#id302" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Element instantiation now uses locks to prevent race conditions with threads</li>
<li>ElementTree.write() did not raise an exception when the file was not writable</li>
<li>Error handling could crash under Python &lt;= 2.4.1 - fixed by disabling thread
support in these environments</li>
<li>Element.find*() did not accept QName objects as path</li>
</ul>
</div>
<div class="section" id="id303">
<h3>Other changes<a class="headerlink" href="#id303" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>code cleanup: redundant _NodeBase super class merged into _Element class
Note: although the impact should be zero in most cases, this change breaks
the compatibility of the public C-API</li>
</ul>
</div>
</div>
<div class="section" id="id304">
<h2>1.1.2 (2006-10-30)<a class="headerlink" href="#id304" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id305">
<h3>Features added<a class="headerlink" href="#id305" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Data elements in objectify support repr(), which is now used by dump()</li>
<li>Source distribution now ships with a patched Pyrex</li>
<li>New C-API function makeElement() to create new elements with text,
tail, attributes and namespaces</li>
<li>Reuse original parser flags for XInclude</li>
<li>Simplified support for handling XSLT processing instructions</li>
</ul>
</div>
<div class="section" id="id306">
<h3>Bugs fixed<a class="headerlink" href="#id306" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Parser resources were not freed before the next parser run</li>
<li>Open files and XML strings returned by Python resolvers were not
closed/freed</li>
<li>Crash in the IDDict returned by XMLDTDID</li>
<li>Copying Comments and ProcessingInstructions failed</li>
<li>Memory leak for external URLs in _XSLTProcessingInstruction.parseXSL()</li>
<li>Memory leak when garbage collecting tailed root elements</li>
<li>HTML script/style content was not propagated to .text</li>
<li>Show text xincluded between text nodes correctly in .text and .tail</li>
<li>&#8216;integer * objectify.StringElement&#8217; operation was not supported</li>
</ul>
</div>
</div>
<div class="section" id="id307">
<h2>1.1.1 (2006-09-21)<a class="headerlink" href="#id307" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id308">
<h3>Features added<a class="headerlink" href="#id308" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>XSLT profiling support (<code class="docutils literal"><span class="pre">profile_run</span></code> keyword)</li>
<li>countchildren() method on objectify.ObjectifiedElement</li>
<li>Support custom elements for tree nodes in lxml.objectify</li>
</ul>
</div>
<div class="section" id="id309">
<h3>Bugs fixed<a class="headerlink" href="#id309" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml.objectify failed to support long data values (e.g., &#8220;123L&#8221;)</li>
<li>Error messages from XSLT did not reach <code class="docutils literal"><span class="pre">XSLT.error_log</span></code></li>
<li>Factories objectify.Element() and objectify.DataElement() were missing
<code class="docutils literal"><span class="pre">attrib</span></code> and <code class="docutils literal"><span class="pre">nsmap</span></code> keyword arguments</li>
<li>Changing the default parser in lxml.objectify did not update the factories
Element() and DataElement()</li>
<li>Let lxml.objectify.Element() always generate tree elements (not data
elements)</li>
<li>Build under Windows failed (&#8216;0&#8217; bug in patched Pyrex version)</li>
</ul>
</div>
</div>
<div class="section" id="id310">
<h2>1.1 (2006-09-13)<a class="headerlink" href="#id310" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id311">
<h3>Features added<a class="headerlink" href="#id311" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Comments and processing instructions return &#8216;&lt;!&#8211; comment &#8211;&gt;&#8217; and
&#8216;&lt;?pi-target content?&gt;&#8217; for repr()</li>
<li>Parsers are now the preferred (and default) place where element class lookup
schemes should be registered.  Namespace lookup is no longer supported by
default.</li>
<li>Support for Python 2.5 beta</li>
<li>Unlock the GIL for deep copying documents and for XPath()</li>
<li>New <code class="docutils literal"><span class="pre">compact</span></code> keyword argument for parsing read-only documents</li>
<li>Support for parser options in iterparse()</li>
<li>The <code class="docutils literal"><span class="pre">namespace</span></code> axis is supported in XPath and returns (prefix, URI)
tuples</li>
<li>The XPath expression &#8220;/&#8221; now returns an empty list instead of raising an
exception</li>
<li>XML-Object API on top of lxml (lxml.objectify)</li>
<li>Customizable Element class lookup:<ul>
<li>different pre-implemented lookup mechanisms</li>
<li>support for externally provided lookup functions</li>
</ul>
</li>
<li>Support for processing instructions (ET-like, not compatible)</li>
<li>Public C-level API for independent extension modules</li>
<li>Module level <code class="docutils literal"><span class="pre">iterwalk()</span></code> function as &#8216;iterparse&#8217; for trees</li>
<li>Module level <code class="docutils literal"><span class="pre">iterparse()</span></code> function similar to ElementTree (see
documentation for differences)</li>
<li>Element.nsmap property returns a mapping of all namespace prefixes known at
the Element to their namespace URI</li>
<li>Reentrant threading support in RelaxNG, XMLSchema and XSLT</li>
<li>Threading support in parsers and serializers:<ul>
<li>All in-memory operations (tostring, parse(StringIO), etc.) free the GIL</li>
<li>File operations (on file names) free the GIL</li>
<li>Reading from file-like objects frees the GIL and reacquires it for reading</li>
<li>Serialisation to file-like objects is single-threaded (high lock overhead)</li>
</ul>
</li>
<li>Element iteration over XPath axes:<ul>
<li>Element.iterdescendants() iterates over the descendants of an element</li>
<li>Element.iterancestors() iterates over the ancestors of an element (from
parent to parent)</li>
<li>Element.itersiblings() iterates over either the following or preceding
siblings of an element</li>
<li>Element.iterchildren() iterates over the children of an element in either
direction</li>
<li>All iterators support the <code class="docutils literal"><span class="pre">tag</span></code> keyword argument to restrict the
generated elements</li>
</ul>
</li>
<li>Element.getnext() and Element.getprevious() return the direct siblings of an
element</li>
</ul>
</div>
<div class="section" id="id312">
<h3>Bugs fixed<a class="headerlink" href="#id312" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>filenames with local 8-bit encoding were not supported</li>
<li>1.1beta did not compile under Python 2.3</li>
<li>ignore unknown &#8216;pyval&#8217; attribute values in objectify</li>
<li>objectify.ObjectifiedElement.addattr() failed to accept Elements and Lists</li>
<li>objectify.ObjectPath.setattr() failed to accept Elements and Lists</li>
<li>XPathSyntaxError now inherits from XPathError</li>
<li>Threading race conditions in RelaxNG and XMLSchema</li>
<li>Crash when mixing elements from XSLT results into other trees, concurrent
XSLT is only allowed when the stylesheet was parsed in the main thread</li>
<li>The EXSLT <code class="docutils literal"><span class="pre">regexp:match</span></code> function now works as defined (except for some
differences in the regular expression syntax)</li>
<li>Setting element.text to &#8216;&#8217; returned None on request, not the empty string</li>
<li><code class="docutils literal"><span class="pre">iterparse()</span></code> could crash on long XML files</li>
<li>Creating documents no longer copies the parser for later URL resolving.  For
performance reasons, only a reference is kept.  Resolver updates on the
parser will now be reflected by documents that were parsed before the
change.  Although this should rarely become visible, it is a behavioral
change from 1.0.</li>
</ul>
</div>
</div>
<div class="section" id="id313">
<h2>1.0.4 (2006-09-09)<a class="headerlink" href="#id313" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id314">
<h3>Features added<a class="headerlink" href="#id314" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>List-like <code class="docutils literal"><span class="pre">Element.extend()</span></code> method</li>
</ul>
</div>
<div class="section" id="id315">
<h3>Bugs fixed<a class="headerlink" href="#id315" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash in tail handling in <code class="docutils literal"><span class="pre">Element.replace()</span></code></li>
</ul>
</div>
</div>
<div class="section" id="id316">
<h2>1.0.3 (2006-08-08)<a class="headerlink" href="#id316" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id317">
<h3>Features added<a class="headerlink" href="#id317" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Element.replace(old, new) method to replace a subelement by another one</li>
</ul>
</div>
<div class="section" id="id318">
<h3>Bugs fixed<a class="headerlink" href="#id318" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Crash when mixing elements from XSLT results into other trees</li>
<li>Copying/deepcopying did not work for ElementTree objects</li>
<li>Setting an attribute to a non-string value did not raise an exception</li>
<li>Element.remove() deleted the tail text from the removed Element</li>
</ul>
</div>
</div>
<div class="section" id="id319">
<h2>1.0.2 (2006-06-27)<a class="headerlink" href="#id319" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id320">
<h3>Features added<a class="headerlink" href="#id320" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for setting a custom default Element class as opposed to namespace
specific classes (which still override the default class)</li>
</ul>
</div>
<div class="section" id="id321">
<h3>Bugs fixed<a class="headerlink" href="#id321" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rare exceptions in Python list functions were not handled</li>
<li>Parsing accepted unicode strings with XML encoding declaration in certain
cases</li>
<li>Parsing 8-bit encoded strings from StringIO objects raised an exception</li>
<li>Module function <code class="docutils literal"><span class="pre">initThread()</span></code> was removed - useless (and never worked)</li>
<li>XSLT and parser exception messages include the error line number</li>
</ul>
</div>
</div>
<div class="section" id="id322">
<h2>1.0.1 (2006-06-09)<a class="headerlink" href="#id322" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id323">
<h3>Features added<a class="headerlink" href="#id323" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Repeated calls to Element.attrib now efficiently return the same instance</li>
</ul>
</div>
<div class="section" id="id324">
<h3>Bugs fixed<a class="headerlink" href="#id324" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Document deallocation could crash in certain garbage collection scenarios</li>
<li>Extension function calls in XSLT variable declarations could break the
stylesheet and crash on repeated calls</li>
<li>Deep copying Elements could lose namespaces declared in parents</li>
<li>Deep copying Elements did not copy tail</li>
<li>Parsing file(-like) objects failed to load external entities</li>
<li>Parsing 8-bit strings from file(-like) objects raised an exception</li>
<li>xsl:include failed when the stylesheet was parsed from a file-like object</li>
<li>lxml.sax.ElementTreeProducer did not call startDocument() / endDocument()</li>
<li>MSVC compiler complained about long strings (supports only 2048 bytes)</li>
</ul>
</div>
</div>
<div class="section" id="id325">
<h2>1.0 (2006-06-01)<a class="headerlink" href="#id325" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id326">
<h3>Features added<a class="headerlink" href="#id326" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Element.getiterator() and the findall() methods support finding arbitrary
elements from a namespace (pattern <code class="docutils literal"><span class="pre">{namespace}*</span></code>)</li>
<li>Another speedup in tree iteration code</li>
<li>General speedup of Python Element object creation and deallocation</li>
<li>Writing C14N no longer serializes in memory (reduced memory footprint)</li>
<li>PyErrorLog for error logging through the Python <code class="docutils literal"><span class="pre">logging</span></code> module</li>
<li><code class="docutils literal"><span class="pre">Element.getroottree()</span></code> returns an ElementTree for the root node of the
document that contains the element.</li>
<li>ElementTree.getpath(element) returns a simple, absolute XPath expression to
find the element in the tree structure</li>
<li>Error logs have a <code class="docutils literal"><span class="pre">last_error</span></code> attribute for convenience</li>
<li>Comment texts can be changed through the API</li>
<li>Formatted output via <code class="docutils literal"><span class="pre">pretty_print</span></code> keyword in serialization functions</li>
<li>XSLT can block access to file system and network via <code class="docutils literal"><span class="pre">XSLTAccessControl</span></code></li>
<li>ElementTree.write() no longer serializes in memory (reduced memory
footprint)</li>
<li>Speedup of Element.findall(tag) and Element.getiterator(tag)</li>
<li>Support for writing the XML representation of Elements and ElementTrees to
Python unicode strings via <code class="docutils literal"><span class="pre">etree.tounicode()</span></code></li>
<li>Support for writing XSLT results to Python unicode strings via <code class="docutils literal"><span class="pre">unicode()</span></code></li>
<li>Parsing a unicode string no longer copies the string (reduced memory
footprint)</li>
<li>Parsing file-like objects reads chunks rather than the whole file (reduced
memory footprint)</li>
<li>Parsing StringIO objects from the start avoids copying the string (reduced
memory footprint)</li>
<li>Read-only &#8216;docinfo&#8217; attribute in ElementTree class holds DOCTYPE
information, original encoding and XML version as seen by the parser</li>
<li>etree module can be compiled without libxslt by commenting out the line
<code class="docutils literal"><span class="pre">include</span> <span class="pre">&quot;xslt.pxi&quot;</span></code> near the end of the etree.pyx source file</li>
<li>Better error messages in parser exceptions</li>
<li>Error reporting also works in XSLT</li>
<li>Support for custom document loaders (URI resolvers) in parsers and XSLT,
resolvers are registered at parser level</li>
<li>Implementation of exslt:regexp for XSLT based on the Python &#8216;re&#8217; module,
enabled by default, can be switched off with &#8216;regexp=False&#8217; keyword argument</li>
<li>Support for exslt extensions (libexslt) and libxslt extra functions
(node-set, document, write, output)</li>
<li>Substantial speedup in XPath.evaluate()</li>
<li>HTMLParser for parsing (broken) HTML</li>
<li>XMLDTDID function parses XML into tuple (root node, ID dict) based on xml:id
implementation of libxml2 (as opposed to ET compatible XMLID)</li>
</ul>
</div>
<div class="section" id="id327">
<h3>Bugs fixed<a class="headerlink" href="#id327" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory leak in Element.__setitem__</li>
<li>Memory leak in Element.attrib.items() and Element.attrib.values()</li>
<li>Memory leak in XPath extension functions</li>
<li>Memory leak in unicode related setup code</li>
<li>Element now raises ValueError on empty tag names</li>
<li>Namespace fixing after moving elements between documents could fail if the
source document was freed too early</li>
<li>Setting namespace-less tag names on namespaced elements (&#8216;{ns}t&#8217; -&gt; &#8216;t&#8217;)
didn&#8217;t reset the namespace</li>
<li>Unknown constants from newer libxml2 versions could raise exceptions in the
error handlers</li>
<li>lxml.etree compiles much faster</li>
<li>On libxml2 &lt;= 2.6.22, parsing strings with encoding declaration could fail
in certain cases</li>
<li>Document reference in ElementTree objects was not updated when the root
element was moved to a different document</li>
<li>Running absolute XPath expressions on an Element now evaluates against the
root tree</li>
<li>Evaluating absolute XPath expressions (<code class="docutils literal"><span class="pre">/*</span></code>) on an ElementTree could fail</li>
<li>Crashes when calling XSLT, RelaxNG, etc. with uninitialized ElementTree
objects</li>
<li>Removed public function <code class="docutils literal"><span class="pre">initThreadLogging()</span></code>, replaced by more general
<code class="docutils literal"><span class="pre">initThread()</span></code> which fixes a number of setup problems in threads</li>
<li>Memory leak when using iconv encoders in tostring/write</li>
<li>Deep copying Elements and ElementTrees maintains the document information</li>
<li>Serialization functions raise LookupError for unknown encodings</li>
<li>Memory deallocation crash resulting from deep copying elements</li>
<li>Some ElementTree methods could crash if the root node was not initialized
(neither file nor element passed to the constructor)</li>
<li>Element/SubElement failed to set attribute namespaces from passed <code class="docutils literal"><span class="pre">attrib</span></code>
dictionary</li>
<li><code class="docutils literal"><span class="pre">tostring()</span></code> adds an XML declaration for non-ASCII encodings</li>
<li><code class="docutils literal"><span class="pre">tostring()</span></code> failed to serialize encodings that contain 0-bytes</li>
<li>ElementTree.xpath() and XPathDocumentEvaluator were not using the
ElementTree root node as reference point</li>
<li>Calling <code class="docutils literal"><span class="pre">document('')</span></code> in XSLT failed to return the stylesheet</li>
</ul>
</div>
</div>
<div class="section" id="id328">
<h2>0.9.2 (2006-05-10)<a class="headerlink" href="#id328" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id329">
<h3>Features added<a class="headerlink" href="#id329" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Speedup for Element.makeelement(): the new element reuses the original
libxml2 document instead of creating a new empty one</li>
<li>Speedup for reversed() iteration over element children (Py2.4+ only)</li>
<li>ElementTree compatible QName class</li>
<li>RelaxNG and XMLSchema accept any Element, not only ElementTrees</li>
</ul>
</div>
<div class="section" id="id330">
<h3>Bugs fixed<a class="headerlink" href="#id330" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>str(xslt_result) was broken for XSLT output other than UTF-8</li>
<li>Memory leak if write_c14n fails to write the file after conversion</li>
<li>Crash in XMLSchema and RelaxNG when passing non-schema documents</li>
<li>Memory leak in RelaxNG() when RelaxNGParseError is raised</li>
</ul>
</div>
</div>
<div class="section" id="id331">
<h2>0.9.1 (2006-03-30)<a class="headerlink" href="#id331" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id332">
<h3>Features added<a class="headerlink" href="#id332" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>lxml.sax.ElementTreeContentHandler checks closing elements and raises
SaxError on mismatch</li>
<li>lxml.sax.ElementTreeContentHandler supports namespace-less SAX events
(startElement, endElement) and defaults to empty attributes (keyword
argument)</li>
<li>Speedup for repeatedly accessing element tag names</li>
<li>Minor API performance improvements</li>
</ul>
</div>
<div class="section" id="id333">
<h3>Bugs fixed<a class="headerlink" href="#id333" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory deallocation bug when using XSLT output method &#8220;html&#8221;</li>
<li>sax.py was handling UTF-8 encoded tag names where it shouldn&#8217;t</li>
<li>lxml.tests package will no longer be installed (is still in source tar)</li>
</ul>
</div>
</div>
<div class="section" id="id334">
<h2>0.9 (2006-03-20)<a class="headerlink" href="#id334" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id335">
<h3>Features added<a class="headerlink" href="#id335" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Error logging API for libxml2 error messages</li>
<li>Various performance improvements</li>
<li>Benchmark script for lxml, ElementTree and cElementTree</li>
<li>Support for registering extension functions through new FunctionNamespace
class (see doc/extensions.txt)</li>
<li>ETXPath class for XPath expressions in ElementTree notation (&#8216;//{ns}tag&#8217;)</li>
<li>Support for variables in XPath expressions (also in XPath class)</li>
<li>XPath class for compiled XPath expressions</li>
<li>XMLID module level function (ElementTree compatible)</li>
<li>XMLParser API for customized libxml2 parser configuration</li>
<li>Support for custom Element classes through new Namespace API (see
doc/namespace_extensions.txt)</li>
<li>Common exception base class LxmlError for module exceptions</li>
<li>real iterator support in iter(Element), Element.getiterator()</li>
<li>XSLT objects are callable, result trees support str()</li>
<li>Added MANIFEST.in for easier creation of RPM files.</li>
<li>&#8216;getparent&#8217; method on elements allows navigation to an element&#8217;s
parent element.</li>
<li>Python core compatible SAX tree builder and SAX event generator. See
doc/sax.txt for more information.</li>
</ul>
</div>
<div class="section" id="id336">
<h3>Bugs fixed<a class="headerlink" href="#id336" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Segfaults and memory leaks in various API functions of Element</li>
<li>Segfault in XSLT.tostring()</li>
<li>ElementTree objects no longer interfere, Elements can be root of different
ElementTrees at the same time</li>
<li>document(&#8216;&#8217;) works in XSLT documents read from files (in-memory documents
cannot support this due to libxslt deficiencies)</li>
</ul>
</div>
</div>
<div class="section" id="id337">
<h2>0.8 (2005-11-03)<a class="headerlink" href="#id337" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id338">
<h3>Features added<a class="headerlink" href="#id338" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for copy.deepcopy() on elements. copy.copy() works also, but
does the same thing, and does <em>not</em> create a shallow copy, as that
makes no sense in the context of libxml2 trees. This means a
potential incompatibility with ElementTree, but there&#8217;s more chance
that it works than if copy.copy() isn&#8217;t supported at all.</li>
<li>Increased compatibility with (c)ElementTree; .parse() on ElementTree is
supported and parsing of gzipped XML files works.</li>
<li>implemented index() on elements, allowing one to find the index of a
SubElement.</li>
</ul>
</div>
<div class="section" id="id339">
<h3>Bugs fixed<a class="headerlink" href="#id339" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use xslt-config instead of xml2-config to find out libxml2
directories to take into account a case where libxslt is installed
in a different directory than libxslt.</li>
<li>Eliminate crash condition in iteration when text nodes are changed.</li>
<li>Passing &#8216;None&#8217; to tostring() does not result in a segfault anymore,
but an AssertionError.</li>
<li>Some test fixes for Windows.</li>
<li>Raise XMLSyntaxError and XPathSyntaxError instead of plain python
syntax errors. This should be less confusing.</li>
<li>Fixed error with uncaught exception in Pyrex code.</li>
<li>Calling lxml.etree.fromstring(&#8216;&#8217;) throws XMLSyntaxError instead of a
segfault.</li>
<li>has_key() works on attrib. &#8216;in&#8217; tests also work correctly on attrib.</li>
<li>INSTALL.txt was saying 2.2.16 instead of 2.6.16 as a supported
libxml2 version, as it should.</li>
<li>Passing a UTF-8 encoded string to the XML() function would fail;
fixed.</li>
</ul>
</div>
</div>
<div class="section" id="id340">
<h2>0.7 (2005-06-15)<a class="headerlink" href="#id340" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id341">
<h3>Features added<a class="headerlink" href="#id341" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>parameters (XPath expressions) can be passed to XSLT using keyword
parameters.</li>
<li>Simple XInclude support. Calling the xinclude() method on a tree
will process any XInclude statements in the document.</li>
<li>XMLSchema support. Use the XMLSchema class or the convenience
xmlschema() method on a tree to do XML Schema (XSD) validation.</li>
<li>Added convenience xslt() method on tree. This is less efficient
than the XSLT object, but makes it easier to write quick code.</li>
<li>Added convenience relaxng() method on tree. This is less efficient
than the RelaxNG object, but makes it easier to write quick code.</li>
<li>Make it possible to use XPathEvaluator with elements as well. The
XPathEvaluator in this case will retain the element so multiple
XPath queries can be made against one element efficiently. This
replaces the second argument to the .evaluate() method that existed
previously.</li>
<li>Allow registerNamespace() to be called on an XPathEvaluator, after
creation, to add additional namespaces. Also allow registerNamespaces(),
which does the same for a namespace dictionary.</li>
<li>Add &#8216;prefix&#8217; attribute to element to be able to read prefix information.
This is entirely read-only.</li>
<li>It is possible to supply an extra nsmap keyword parameter to
the Element() and SubElement() constructors, which supplies a
prefix to namespace URI mapping. This will create namespace
prefix declarations on these elements and these prefixes will show up
in XML serialization.</li>
</ul>
</div>
<div class="section" id="id342">
<h3>Bugs fixed<a class="headerlink" href="#id342" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Killed yet another memory management related bug: trees created
using newDoc would not get a libxml2-level dictionary, which caused
problems when deallocating these documents later if they contained a
node that came from a document with a dictionary.</li>
<li>Moving namespaced elements between documents was problematic as
references to the original document would remain. This has been fixed
by applying xmlReconciliateNs() after each move operation.</li>
<li>Can pass None to &#8216;dump()&#8217; without segfaults.</li>
<li>tostring() works properly for non-root elements as well.</li>
<li>Cleaned out the tostring() method so it should handle encoding
correctly.</li>
<li>Cleaned out the ElementTree.write() method so it should handle encoding
correctly. Writing directly to a file should also be faster, as there is no
need to go through a Python string in that case. Made sure the test cases
test both serializing to StringIO as well as serializing to a real file.</li>
</ul>
</div>
</div>
<div class="section" id="id343">
<h2>0.6 (2005-05-14)<a class="headerlink" href="#id343" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id344">
<h3>Features added<a class="headerlink" href="#id344" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Changed setup.py so that library_dirs is also guessed. This should
help with compilation on the Mac OS X platform, where otherwise the
wrong library (shipping with the OS) could be picked up.</li>
<li>Tweaked setup.py so that it picks up the version from version.txt.</li>
</ul>
</div>
<div class="section" id="id345">
<h3>Bugs fixed<a class="headerlink" href="#id345" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Do the right thing when handling namespaced attributes.</li>
<li>fix bug where tostring() moved nodes into new documents. tostring()
had very nasty side-effects before this fix, sorry!</li>
</ul>
</div>
</div>
<div class="section" id="id346">
<h2>0.5.1 (2005-04-09)<a class="headerlink" href="#id346" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python 2.2 compatibility fixes.</li>
<li>unicode fixes in Element() and Comment() as well as XML(); unicode
input wasn&#8217;t properly being UTF-8 encoded.</li>
</ul>
</div>
<div class="section" id="id347">
<h2>0.5 (2005-04-08)<a class="headerlink" href="#id347" title="Permalink to this headline">¶</a></h2>
<p>Initial public release.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, lxml project.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/GregoryVigoTorres/lxml_rtd_sphinx_theme">theme</a> forked from <a href="https://github.com/rtfd/sphinx_rtd_theme/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  
    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.7.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>